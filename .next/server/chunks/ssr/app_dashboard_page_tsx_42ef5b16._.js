module.exports=[20731,a=>{"use strict";var b=a.i(46447),c=a.i(30564),d=a.i(35561),e=a.i(1470),f=a.i(3130),g=a.i(11634),h=a.i(52221),i=a.i(48561),j=a.i(61237);let k=(0,j.default)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),l=(0,j.default)("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);var m=a.i(25362),n=a.i(26345),o=a.i(75407),p=a.i(6665);function q({user:a}={}){let d=(0,i.getStoredLeaderTeam)(),[e,f]=(0,c.useState)(d),[h,j]=(0,c.useState)(!d),[r,s]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let a=await g.authService.getTeamDetails();f(a)}catch(a){s(a.message||"Failed to load team")}finally{j(!1)}})()},[]);let t=(0,c.useMemo)(()=>{if(!e)return[];let a=new Map,b=b=>{if(!b)return;let c=b.id||b.email||`${b.name??""}_${b.phone??""}`;a.has(c)||a.set(c,b)};return b(e.faculty_mentor),b(e.faculty_mentor_1),b(e.faculty_mentor_2),Array.isArray(e.mentors)&&e.mentors.forEach(b),Array.from(a.values())},[e]),u=e?.team_id||"Not assigned",v=e?.members?.length??0,w=(0,c.useMemo)(()=>{if(!e?.poc)return[];let a=e.poc;return[{label:"Email",value:a.email},{label:"Phone",value:a.phone},{label:"Designation",value:a.designation},{label:"Role",value:a.role}].filter(a=>a.value&&String(a.value).trim().length>0)},[e]),x=(0,c.useMemo)(()=>{if(!e?.problem_statement)return[];let a=[];return e.problem_statement.id&&a.push({label:"Problem Statement ID",value:`#${e.problem_statement.id}`}),e.problem_statement.title&&a.push({label:"Title",value:e.problem_statement.title}),a},[e]),y=(0,c.useMemo)(()=>{if(!e)return[];let a=[];e.institution&&a.push({label:"Institution",value:e.institution});let b=e.department;b&&a.push({label:"Department",value:b});let c=e.track||e.category;c&&a.push({label:"Track",value:c});let d=e.state,f=e.city;if(d||f){let b=[f,d].filter(Boolean).join(", ");a.push({label:"Location",value:b})}return a},[u,e]);return h?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})}):(0,b.jsxs)("div",{className:"space-y-8 pb-10",children:[(0,b.jsxs)("section",{className:"relative overflow-hidden rounded-3xl border border-[#002449]/15 bg-gradient-to-br from-[#002449]/10 via-white to-white p-8 shadow-sm md:p-12",children:[(0,b.jsx)("div",{className:"absolute -right-20 -top-20 h-56 w-56 rounded-full bg-[#002449]/10 blur-3xl","aria-hidden":"true"}),(0,b.jsx)("div",{className:"absolute -left-24 top-10 h-48 w-48 rounded-full bg-[#f75700]/15 blur-3xl","aria-hidden":"true"}),(0,b.jsx)("div",{className:"absolute -right-10 bottom-[-60px] h-60 w-60 rounded-full bg-[#0b8f6f]/20 blur-3xl","aria-hidden":"true"}),(0,b.jsxs)("div",{className:"relative space-y-6",children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-[#002449] shadow-sm",children:[(0,b.jsx)(p.Users,{className:"h-3.5 w-3.5"}),"Team Leader Dashboard"]}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-[#002449] md:text-4xl",children:e?`${e.name}`:"Team Leader Workspace"})}),e&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-[#002449]",children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-semibold shadow-sm",children:[(0,b.jsx)(l,{className:"h-4 w-4"}),"Team ID: ",u]}),e.problem_statement?.id&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/30 bg-white/15 px-3 py-1 font-semibold text-[#002449] shadow-sm backdrop-blur",children:[(0,b.jsx)(m.Layers,{className:"h-4 w-4"}),e.problem_statement.id]}),(0,b.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-semibold shadow-sm",children:[(0,b.jsx)(k,{className:"h-4 w-4"}),"HARDWARE"]})]})]})]}),r&&(0,b.jsx)("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-4 text-sm text-red-800 shadow-sm",children:r}),e?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,2.2fr)_minmax(0,1fr)]",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,b.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"Problem Statement Overview"})}),x.length>0?(0,b.jsx)("dl",{className:"mt-6 grid gap-4 text-sm text-gray-700 sm:grid-cols-2",children:x.map(a=>(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("dt",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:a.label}),(0,b.jsx)("dd",{className:"font-medium text-gray-900",children:a.value})]},a.label))}):(0,b.jsx)("p",{className:"mt-6 text-sm text-gray-600",children:"Problem statement details are not available yet."}),e.problem_statement?.description&&(0,b.jsxs)("div",{className:"mt-6 rounded-xl border border-gray-100 bg-gray-50 p-4 text-sm text-gray-700",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:"Summary"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:e.problem_statement.description})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"Team Roster"}),(0,b.jsxs)("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:[v," member",1===v?"":"s"]})]}),v>0?(0,b.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:e.members.map(a=>{let c=function(a){if(!a)return"TL";let b=a.split(" ").filter(Boolean).slice(0,2);return 0===b.length?"TL":b.map(a=>a.charAt(0).toUpperCase()).join("")}(a.user.name);return(0,b.jsxs)("div",{className:"rounded-xl border border-gray-100 bg-gray-50 p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white text-sm font-semibold text-[#002449] shadow",children:c}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.user.name}),(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#f75700]",children:a.role||"Member"})]})]}),(0,b.jsxs)("div",{className:"mt-4 space-y-1 text-xs text-gray-600",children:[(0,b.jsxs)("p",{className:"flex items-center gap-2 break-all",children:[(0,b.jsx)(n.Mail,{className:"h-3.5 w-3.5 text-[#002449]"}),a.user.email]}),a.phone&&(0,b.jsxs)("p",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Phone,{className:"h-3.5 w-3.5 text-[#002449]"}),a.phone]})]})]},a.id||a.user.email)})}):(0,b.jsx)("p",{className:"mt-6 text-sm text-gray-600",children:"Team roster details are not available yet."})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"POC Details"}),e.poc?(0,b.jsxs)("div",{className:"mt-4 space-y-4 text-sm text-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900",children:e.poc.name||"Not provided"}),e.poc.role&&(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#f75700]",children:e.poc.role})]}),e.poc.is_verified_poc&&(0,b.jsx)("span",{className:"rounded-full bg-[#078e31]/10 px-3 py-1 text-xs font-semibold text-[#078e31]",children:"Verified"})]}),(0,b.jsx)("dl",{className:"space-y-3",children:w.length>0?w.map(a=>(0,b.jsxs)("div",{children:[(0,b.jsx)("dt",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:a.label}),(0,b.jsx)("dd",{className:"font-medium text-gray-900",children:a.value})]},a.label)):(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"No additional POC details available."})})]}):(0,b.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"A point of contact has not been assigned yet."})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"Institute"}),y.length>0?(0,b.jsx)("dl",{className:"mt-4 space-y-3 text-sm text-gray-700",children:y.map(a=>(0,b.jsx)("div",{children:(0,b.jsx)("dd",{className:"font-medium text-gray-900",children:a.value})},a.label))}):(0,b.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"Institute information is not available yet."})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"Faculty Mentors"}),(0,b.jsx)(k,{className:"h-6 w-6 text-[#f75700]"})]}),t.length>0?(0,b.jsx)("ul",{className:"mt-6 space-y-4",children:t.map(a=>(0,b.jsxs)("li",{className:"rounded-xl border border-gray-100 bg-gray-50 p-4 shadow-sm",children:[(0,b.jsx)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.name||"Unnamed mentor"}),(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#f75700]",children:a.role||a.designation||"Faculty mentor"}),a.designation&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.designation})]})}),(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2 text-xs text-gray-600",children:[a.email&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-2 py-1 font-medium text-[#002449] shadow",children:[(0,b.jsx)(n.Mail,{className:"h-3.5 w-3.5"}),a.email]}),a.phone&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-2 py-1 font-medium text-[#002449] shadow",children:[(0,b.jsx)(o.Phone,{className:"h-3.5 w-3.5"}),a.phone]})]})]},a.id||a.email||a.name))}):(0,b.jsx)("p",{className:"mt-6 text-sm text-gray-600",children:"No mentor information found. Ask your faculty coordinators to confirm mentor details in the admin portal."})]})]})]})}):(0,b.jsxs)("div",{className:"rounded-2xl border border-dashed border-gray-300 bg-white p-12 text-center shadow-sm",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"No team data available"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Once your profile is linked to a team, its stats and roster will appear here."})]})]})}var r=a.i(12582),s=a.i(40076),t=a.i(94480),u=a.i(69617),v=a.i(84435);let w=(0,j.default)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var x=a.i(49168),y=a.i(32267),z=a.i(84120),A=a.i(10268),B=a.i(70246),C=a.i(40695),D=a.i(54161),E=a.i(88237);function F({user:a}){let{toast:e}=(0,B.useToast)(),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,n]=(0,c.useState)([]),[o,q]=(0,c.useState)({results:[],count:0}),[F,H]=(0,c.useState)([]),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null),O=(0,c.useCallback)(async()=>{J([]),k(!0);try{let[a,b,c]=await Promise.allSettled([g.authService.getAdminTeams(),z.requestsService.getFilteredQueueSnapshot({include_positions:!0,page:1,page_size:12}),(0,A.getDocumentDashboardOverview)()]);"fulfilled"===a.status?n(a.value||[]):(console.error("Admin teams load failed",a.reason),J(a=>[...a,"Unable to load teams."])),"fulfilled"===b.status?q({results:b.value.results||[],count:b.value.count||0}):(console.error("Queue snapshot load failed",b.reason),J(a=>[...a,"Unable to load virtual queue data."])),"fulfilled"===c.status?H(c.value||[]):(console.error("Pending documents load failed",c.reason),J(a=>[...a,"Unable to load pending documents."]))}finally{i(!1),k(!1)}},[]);(0,c.useEffect)(()=>{O()},[O]);let P=(0,c.useMemo)(()=>l.reduce((a,b)=>a+(b.members?.length||0),0),[l]),Q=(0,c.useMemo)(()=>o.results.slice(0,6),[o.results]),R=(0,c.useMemo)(()=>F.filter(a=>a.pending_review),[F]),S=(0,c.useMemo)(()=>R.filter(a=>a.latest_version?.id),[R]),T=(0,c.useMemo)(()=>F.filter(a=>a.requires_upload),[F]),U=T.length,V=(0,c.useCallback)(a=>a?a.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()):"Unknown",[]),W=(0,c.useCallback)(a=>a?a.replace(/_/g," ").split(" ").map(a=>a?a[0].toUpperCase()+a.slice(1):a).join(" "):"Unknown",[]),X=(0,c.useCallback)(a=>{if(!a)return"outline";let b=a.toLowerCase();return["approved","verified","accepted"].includes(b)?"default":["rejected","declined","invalid"].includes(b)?"destructive":["pending","submitted","in_review","processing","awaiting_review","pending_review"].includes(b)?"secondary":"outline"},[]),Y=async(a,b)=>{L(a);try{"approve"===b?(await (0,A.approveDocument)(a),e({title:"Document approved",description:"The team has been notified about the approval."})):(await (0,A.rejectDocument)(a),e({variant:"destructive",title:"Document rejected",description:"The team has been notified to re-upload the document."})),await O()}catch(a){console.error(`Document ${b} failed`,a),e({variant:"destructive",title:"Action failed",description:a instanceof Error?a.message:`Unable to ${b} document.`})}finally{L(null)}},Z=async a=>{N(a);try{let{download_url:b}=await (0,A.getDownloadURL)(a)}catch(a){console.error("Download link error",a),e({variant:"destructive",title:"Download failed",description:a instanceof Error?a.message:"Unable to fetch download link."})}finally{N(null)}},$=(0,c.useMemo)(()=>{let b=a?.name?.split(" ")[0]||"Admin";return`Welcome, ${b}`},[a?.name]);return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight flex items-center gap-2",style:{color:"#002449"},children:[(0,b.jsx)(x.ShieldCheck,{className:"h-6 w-6 text-[#002449]"})," ",$]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Comprehensive view of teams, requests, and document verifications."})]}),(0,b.jsxs)(C.Button,{size:"sm",variant:"outline",className:"gap-2",onClick:O,disabled:j,children:[j?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(w,{className:"h-4 w-4"})," Refresh data"]})]}),(h||I.length>0)&&(0,b.jsx)("div",{className:"space-y-3",children:I.map((a,c)=>(0,b.jsxs)(f.Card,{className:"p-4 border border-destructive/20 bg-destructive/5 flex items-start gap-3",role:"alert",children:[(0,b.jsx)(r.AlertCircle,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,b.jsx)("p",{className:"text-sm text-destructive",children:a})]},c))}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,b.jsxs)(f.Card,{className:"p-5 border border-gray-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Total Teams"}),(0,b.jsx)("p",{className:"text-2xl font-bold",style:{color:"#002449"},children:l.length})]}),(0,b.jsx)(p.Users,{className:"h-8 w-8 text-[#002449]"})]}),(0,b.jsxs)("p",{className:"mt-3 text-xs text-muted-foreground",children:["Aggregated across all POCs. ",P," participants tracked."]}),(0,b.jsx)(C.Button,{asChild:!0,variant:"link",className:"px-0 text-xs text-[#002449]",children:(0,b.jsx)(d.default,{href:"/dashboard",children:"Manage teams"})})]}),(0,b.jsxs)(f.Card,{className:"p-5 border border-gray-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Virtual Queue"}),(0,b.jsx)("p",{className:"text-2xl font-bold",style:{color:"#002449"},children:o.count})]}),(0,b.jsx)(m.Layers,{className:"h-8 w-8 text-[#002449]"})]}),(0,b.jsx)("p",{className:"mt-3 text-xs text-muted-foreground",children:"Requests awaiting processing across all categories."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(C.Button,{asChild:!0,variant:"outline",size:"sm",className:"text-xs",children:(0,b.jsx)(d.default,{href:"/queue",children:"View queue"})}),(0,b.jsx)(C.Button,{asChild:!0,variant:"outline",size:"sm",className:"text-xs",children:(0,b.jsx)(d.default,{href:"/requests",children:"All requests"})})]})]}),(0,b.jsxs)(f.Card,{className:"p-5 border border-gray-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Pending Documents"}),(0,b.jsx)("p",{className:"text-2xl font-bold",style:{color:"#002449"},children:R.length})]}),(0,b.jsx)(G,{})]}),(0,b.jsxs)("p",{className:"mt-3 text-xs text-muted-foreground",children:["Awaiting verification before disbursements and onboarding.",U>0&&` ${U} document${1===U?" requires":"s require"} an initial upload.`]})]})]}),(0,b.jsxs)("section",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",style:{color:"#002449"},children:"All Teams"}),(0,b.jsxs)(D.Badge,{variant:"secondary",children:[l.length," teams"]})]}),(0,b.jsx)(f.Card,{className:"border border-gray-200",children:h&&0===l.length?(0,b.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,b.jsx)(v.Loader2,{className:"h-5 w-5 animate-spin text-[#002449]"})}):0===l.length?(0,b.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"No teams available."}):(0,b.jsxs)(E.Table,{children:[(0,b.jsx)(E.TableHeader,{children:(0,b.jsxs)(E.TableRow,{children:[(0,b.jsx)(E.TableHead,{children:"Team"}),(0,b.jsx)(E.TableHead,{children:"Institution"}),(0,b.jsx)(E.TableHead,{children:"Problem Statement"}),(0,b.jsx)(E.TableHead,{children:"POC"}),(0,b.jsx)(E.TableHead,{children:"Leader"}),(0,b.jsx)(E.TableHead,{children:"Members"})]})}),(0,b.jsx)(E.TableBody,{children:l.map(a=>{let c=a.members?.find(a=>a.role?.toLowerCase().includes("leader")),d=a.poc?.name||a.poc?.email||"-",e=a.problem_statement?.id?`${a.problem_statement.id}`:"Not assigned";return(0,b.jsxs)(E.TableRow,{className:"align-top",children:[(0,b.jsx)(E.TableCell,{className:"font-medium",style:{color:"#002449"},children:a.name}),(0,b.jsx)(E.TableCell,{className:"max-w-[220px] truncate",title:a.institution,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Building2,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)("span",{children:a.institution})]})}),(0,b.jsx)(E.TableCell,{className:"text-xs text-muted-foreground max-w-[260px]",children:e}),(0,b.jsxs)(E.TableCell,{className:"text-xs",children:[d,a.poc?.email&&(0,b.jsx)("div",{className:"text-muted-foreground",children:a.poc.email})]}),(0,b.jsxs)(E.TableCell,{className:"text-xs",children:[c?.user?.name||c?.user?.email||"-",c?.user?.email&&(0,b.jsx)("div",{className:"text-muted-foreground",children:c.user.email})]}),(0,b.jsx)(E.TableCell,{className:"text-xs text-muted-foreground",children:a.members?.length??0})]},a.id)})}),(0,b.jsx)(E.TableCaption,{children:"Snapshot of every registered team under the current cohort."})]})})]}),(0,b.jsxs)("section",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",style:{color:"#002449"},children:"Virtual Queue Overview"}),(0,b.jsxs)(D.Badge,{variant:"outline",children:[o.count," total"]})]}),(0,b.jsx)(f.Card,{className:"border border-gray-200",children:h&&0===Q.length?(0,b.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,b.jsx)(v.Loader2,{className:"h-5 w-5 animate-spin text-[#002449]"})}):0===Q.length?(0,b.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"Queue is currently empty."}):(0,b.jsxs)(E.Table,{children:[(0,b.jsx)(E.TableHeader,{children:(0,b.jsxs)(E.TableRow,{children:[(0,b.jsx)(E.TableHead,{children:"Team"}),(0,b.jsx)(E.TableHead,{children:"Category"}),(0,b.jsx)(E.TableHead,{children:"Status"}),(0,b.jsx)(E.TableHead,{children:"Submitted"})]})}),(0,b.jsx)(E.TableBody,{children:Q.map(a=>(0,b.jsxs)(E.TableRow,{children:[(0,b.jsx)(E.TableCell,{className:"font-medium",style:{color:"#002449"},children:a.team_name||a.team_id}),(0,b.jsx)(E.TableCell,{className:"text-xs text-muted-foreground",children:a.category}),(0,b.jsx)(E.TableCell,{className:"text-xs",children:(0,b.jsx)(D.Badge,{variant:"Submitted"===a.status?"secondary":"outline",children:a.status})}),(0,b.jsx)(E.TableCell,{className:"text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleString()})]},a.id))}),(0,b.jsx)(E.TableCaption,{children:"Showing latest submissions. Visit the queue page for full controls."})]})})]}),(0,b.jsxs)("section",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",style:{color:"#002449"},children:"Pending Document Verification"}),(0,b.jsxs)(D.Badge,{variant:"outline",children:[R.length," awaiting review"]})]}),(0,b.jsx)(f.Card,{className:"border border-gray-200",children:h&&0===F.length?(0,b.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,b.jsx)(v.Loader2,{className:"h-5 w-5 animate-spin text-[#002449]"})}):0===F.length?(0,b.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"No documents need attention right now."}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(E.Table,{children:[(0,b.jsx)(E.TableHeader,{children:(0,b.jsxs)(E.TableRow,{children:[(0,b.jsx)(E.TableHead,{children:"Team"}),(0,b.jsx)(E.TableHead,{children:"Type"}),(0,b.jsx)(E.TableHead,{children:"Uploaded"}),(0,b.jsx)(E.TableHead,{children:"Status"}),(0,b.jsx)(E.TableHead,{children:"Actions"})]})}),(0,b.jsx)(E.TableBody,{children:0===S.length?(0,b.jsx)(E.TableRow,{children:(0,b.jsx)(E.TableCell,{colSpan:5,className:"text-center text-sm text-muted-foreground",children:"No documents awaiting review. Monitor the upload reminders below."})}):S.map(a=>{let c=a.latest_version,d=c?.uploaded_at?new Date(c.uploaded_at).toLocaleString():"—",e=c?.id||a.document_id||"",f=K===e,g=M===e,h=W(a.latest_status),i=X(a.latest_status);return(0,b.jsxs)(E.TableRow,{children:[(0,b.jsxs)(E.TableCell,{children:[(0,b.jsx)("div",{className:"font-medium",style:{color:"#002449"},children:a.team_name||a.team_id}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Version: ",c?.version??"—"]})]}),(0,b.jsx)(E.TableCell,{className:"text-xs text-muted-foreground",children:V(a.document_type)}),(0,b.jsx)(E.TableCell,{className:"text-xs text-muted-foreground",children:d}),(0,b.jsx)(E.TableCell,{className:"text-xs",children:(0,b.jsx)(D.Badge,{variant:i,children:h})}),(0,b.jsx)(E.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(C.Button,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>Z(e),disabled:g||f,children:[g?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(u.Download,{className:"h-4 w-4"}),"Download"]}),(0,b.jsxs)(C.Button,{size:"sm",variant:"secondary",className:"text-xs",onClick:()=>Y(e,"approve"),disabled:f,children:[f?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(t.Check,{className:"h-4 w-4"}),"Approve"]}),(0,b.jsxs)(C.Button,{size:"sm",variant:"destructive",className:"text-xs",onClick:()=>Y(e,"reject"),disabled:f,children:[f?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(y.X,{className:"h-4 w-4"}),"Reject"]})]})})]},e||`${a.team_id}-${a.document_type}`)})}),(0,b.jsx)(E.TableCaption,{children:"Use approve or reject to notify teams instantly."})]}),U>0&&(0,b.jsxs)("div",{className:"rounded-md border border-dashed border-[#002449]/30 bg-[#002449]/5 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,b.jsxs)("p",{className:"text-sm font-medium",style:{color:"#002449"},children:["Awaiting initial upload (",U,")"]}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Share reminders with POCs so teams can submit the missing files."})]}),(0,b.jsx)("div",{className:"mt-3 grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:T.slice(0,6).map(a=>(0,b.jsxs)("div",{className:"rounded-lg border border-[#002449]/20 bg-white px-3 py-2 text-xs text-muted-foreground",children:[(0,b.jsx)("div",{className:"font-medium text-[#002449]",children:a.team_name||a.team_id}),(0,b.jsx)("div",{children:V(a.document_type)})]},`${a.team_id}-${a.document_type}`))}),T.length>6&&(0,b.jsxs)("p",{className:"mt-3 text-xs text-muted-foreground",children:["And ",T.length-6," more document",T.length-6==1?"":"s"," waiting for an upload."]})]})]})})]})]})}function G(){return(0,b.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-[#002449]",children:[(0,b.jsx)("path",{d:"M6 3h9l5 5v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsx)("path",{d:"M9 7h3m-3 4h6m-6 4h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}let H=(0,j.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var I=a.i(35182),J=a.i(90599);function K(){let a=(0,e.useRouter)(),[d,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{let b=g.authService.getAccessToken();if(!b)return void a.push("/login");try{let a=b.split(".");if(3===a.length){let b=JSON.parse(atob(a[1]));b.is_admin?h("admin"):b.is_poc?h("poc"):h("leader"),j(b)}}catch(a){console.error("Error decoding token:",a)}l(!1)},[a]),k)?(0,b.jsx)(J.DashboardShell,{children:(0,b.jsx)("div",{className:"min-h-[40vh] flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-accent border-t-primary rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground font-medium",children:"Loading dashboard..."})]})})}):(0,b.jsxs)(J.DashboardShell,{children:["admin"===d&&(0,b.jsx)(F,{user:i}),"leader"===d&&(0,b.jsx)(q,{user:i}),"poc"===d&&(0,b.jsx)(L,{user:i}),!d&&(0,b.jsxs)(f.Card,{className:"p-12 text-center",children:[(0,b.jsx)(r.AlertCircle,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground font-medium",children:"Unable to determine user role"})]})]})}function L({user:a}){let[d,g]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),o=(0,e.useRouter)();return((0,c.useEffect)(()=>{(async()=>{try{let a=await (0,h.getCachedPOCTeams)();g(a)}catch(a){n({type:"error",title:"Error",message:a.message||"Failed to load teams"})}finally{j(!1)}})()},[]),i)?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(a=>(0,b.jsxs)(f.Card,{className:"p-6 animate-pulse",children:[(0,b.jsx)("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),(0,b.jsx)("div",{className:"h-12 bg-muted rounded"})]},a))}):(0,b.jsxs)("div",{className:"space-y-6","aria-label":"POC dashboard overview",children:[(0,b.jsxs)("header",{className:"space-y-1",children:[(0,b.jsxs)("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight flex items-center gap-2",style:{color:"#002449"},children:[(0,b.jsx)(p.Users,{className:"w-6 h-6 text-[#002449]"})," Welcome, ",a?.name?.split(" ")[0]||"POC"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Focused view of assigned teams."})]}),m&&(0,b.jsx)(f.Card,{className:"p-4 bg-destructive/5 border border-destructive/20 rounded-lg",role:"alert","aria-live":"polite",children:(0,b.jsxs)("p",{className:"text-destructive font-medium flex items-center gap-2 text-sm",children:[(0,b.jsx)(r.AlertCircle,{className:"w-4 h-4"})," ",m.message]})}),d.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4","aria-label":"Assigned teams list",children:d.map(a=>(0,b.jsx)(M,{team:a,onView:()=>o.push(`/poc/teams/${a.id}`)},a.id))}):(0,b.jsxs)(f.Card,{className:"p-10 text-center rounded-xl",children:[(0,b.jsx)(p.Users,{className:"w-10 h-10 mx-auto text-muted-foreground mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground font-medium",children:"No teams assigned yet"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Check back later for team assignments"})]})]})}function M({team:a,onView:c}){let e=Array.isArray(a.members)?a.members.find(a=>a.role?.toLowerCase()==="leader")?.user?.name||"-":a.leader_name||"-",g=a.problem_statement?.id;return(0,b.jsxs)(f.Card,{role:"group","aria-label":`Team ${a.name}`,className:"p-4 rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md transition flex flex-col gap-3",children:[(0,b.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,b.jsx)("h3",{className:"font-semibold text-base leading-snug line-clamp-2",style:{color:"#002449"},children:a.name})}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 truncate",children:[(0,b.jsx)(I.User2,{className:"w-3 h-3"})," Leader: ",(0,b.jsx)("span",{className:"font-medium",children:e})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 truncate",children:[(0,b.jsx)(s.Building2,{className:"w-3 h-3"})," ",a.institution]}),g&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-[10px] font-semibold tracking-wide bg-[#f75700]/10 text-[#f75700] border border-[#f75700]/30 w-fit",children:[(0,b.jsx)(m.Layers,{className:"w-3 h-3"})," PS ID: ",g]}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,b.jsxs)(C.Button,{onClick:c,size:"sm",variant:"outline",className:"shrink-0 gap-1 text-xs","aria-label":`View details for team ${a.name}`,children:["View ",(0,b.jsx)(H,{className:"w-3 h-3"})]}),(0,b.jsx)(C.Button,{asChild:!0,size:"sm",className:"shrink-0 gap-1 text-xs bg-[#002449] hover:bg-[#001a33] text-white",children:(0,b.jsx)(d.default,{href:`/poc/document-submission?teamId=${a.id}`,"aria-label":`Document submission for team ${a.name}`,children:"Documents"})})]})]})}a.s(["default",()=>K],20731)}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map