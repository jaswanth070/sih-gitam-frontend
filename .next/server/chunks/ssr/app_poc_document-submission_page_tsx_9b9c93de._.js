module.exports=[70286,a=>{"use strict";var b=a.i(46447),c=a.i(30564),d=a.i(35561),e=a.i(1470),f=a.i(84435);let g=(0,a.i(61237).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var h=a.i(32267),i=a.i(69617),j=a.i(40695),k=a.i(5522),l=a.i(54161),m=a.i(70246),n=a.i(97895),o=a.i(10268);let p={idle:"Select a file to begin the upload process.",ready:"File selected. Click Upload to continue.",preparing:"Requesting a secure upload URL...",uploading:"Uploading file to cloud storage...",notifying:"Finalising upload with the backend...",success:"Upload complete. Awaiting admin approval.",error:"Upload failed. Please try again."},q={idle:"Idle",ready:"Ready",preparing:"Preparing",uploading:"Uploading",notifying:"Notifying",success:"Success",error:"Error"},r={idle:"secondary",ready:"secondary",preparing:"secondary",uploading:"secondary",notifying:"secondary",success:"default",error:"destructive"},s=function({teamId:a,documentType:d,label:e,disabled:s=!1,accept:t="application/pdf,image/*",onUploaded:u,disabledReason:v}){let{toast:w}=(0,m.useToast)(),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)("idle"),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(),[J,K]=(0,c.useState)(!1),L=s||!a,M=L&&!!a,N=(0,c.useMemo)(()=>L?a?v??"Uploads are locked for this document.":"Select a team to enable document uploads.":p[B],[v,L,B,a]),O=(0,c.useMemo)(()=>(0,n.cn)("sm:max-w-md cursor-pointer border-2 border-dashed border-[#f75700] bg-white/95 shadow-[0_0_0_1px_rgba(247,87,0,0.18)] transition focus-visible:border-[#f75700] focus-visible:ring-[#f75700]/50 file:cursor-pointer file:rounded-md file:border-0 file:bg-[#f75700] file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-white file:tracking-wide file:uppercase file:transition-colors hover:border-[#d94f00] file:hover:bg-[#d94f00]",x&&!L?"border-solid border-[#078e31] shadow-[0_0_0_1px_rgba(7,142,49,0.2)]":null,L||D?"cursor-not-allowed border-gray-300 bg-gray-100 shadow-none file:bg-gray-300 file:text-gray-600 hover:border-gray-300":null),[L,x,D]),P=M?"Approved":L&&!a?"Select Team":q[B],Q=M?"default":L&&!a?"secondary":r[B],R=(0,n.cn)(M||"success"!==B?null:"bg-[#007367] text-white",M?"bg-emerald-100 text-emerald-700 border border-emerald-200":null),S=(0,c.useCallback)(()=>{y(null),A(a=>a+1)},[]),T=async()=>{if(L)return void w({variant:"destructive",title:"Select a team first",description:"Choose a team from the dashboard to upload documents."});if(!x)return void w({variant:"destructive",title:"No file selected",description:"Pick a file before starting the upload."});E(!0),C("preparing");try{let b=await (0,o.prepareUpload)(a,x,d);C("uploading"),await (0,o.uploadToGCS)(b.upload_url,x),C("notifying");let c=await (0,o.notifyUploaded)(b.version_id);C("success"),G(b.version_id),I(b.storage_path),w({title:`${e} uploaded`,description:"Upload successful. The document is pending administrator review."}),u?.({versionId:b.version_id,storagePath:b.storage_path,notifyPayload:c,preparePayload:b}),S()}catch(b){console.error("Document upload failed",b);let a=b instanceof Error?b.message:"The upload failed.";C("error"),w({variant:"destructive",title:"Upload failed",description:a})}finally{E(!1)}},U=async()=>{if(F){K(!0);try{let{download_url:a}=await (0,o.getDownloadURL)(F)}catch(a){console.error("Download link error",a),w({variant:"destructive",title:"Download failed",description:a instanceof Error?a.message:"Unable to fetch download URL."})}finally{K(!1)}}};return(0,b.jsx)("div",{className:"rounded-lg border border-dashed border-[#002449]/20 bg-[#002449]/5 p-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[#002449]",children:[(0,b.jsx)(g,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm font-semibold",children:e})]}),(0,b.jsx)(l.Badge,{variant:Q,className:R,children:P})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:[(0,b.jsx)(k.Input,{type:"file",accept:t,disabled:L||D,onChange:a=>{let b=a.target.files?.[0];y(b??null),C(b?"ready":"idle")},className:O},z),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(j.Button,{size:"sm",onClick:T,disabled:L||!x||D,"aria-disabled":L||!x||D,children:[D?(0,b.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(g,{className:"mr-2 h-4 w-4"}),D?"Uploading...":"Upload"]}),x&&!D&&(0,b.jsxs)(j.Button,{size:"sm",variant:"ghost",onClick:()=>{S(),C("idle")},disabled:L,children:[(0,b.jsx)(h.X,{className:"mr-1 h-4 w-4"}),"Clear"]}),F&&(0,b.jsxs)(j.Button,{size:"sm",variant:"outline",onClick:U,disabled:J,"aria-disabled":J,children:[J?(0,b.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(i.Download,{className:"mr-2 h-4 w-4"}),"Download"]})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:N}),F&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-semibold text-[#002449]",children:"Latest version:"}),(0,b.jsx)(l.Badge,{variant:"outline",className:"font-mono",children:F}),H&&(0,b.jsxs)("span",{className:"truncate",children:["Path: ",H]})]})]})})};var t=a.i(90599),u=a.i(3130),v=a.i(2209),w=a.i(33734),x=a.i(92432),y=a.i(38032),z=a.i(20755),A=a.i(87695),B=a.i(58383),C=a.i(68234),D=a.i(91586),E="Collapsible",[F,G]=(0,v.createContextScope)(E),[H,I]=F(E),J=c.forwardRef((a,d)=>{let{__scopeCollapsible:e,open:f,defaultOpen:g,disabled:h,onOpenChange:i,...j}=a,[k=!1,l]=(0,z.useControllableState)({prop:f,defaultProp:g,onChange:i});return(0,b.jsx)(H,{scope:e,disabled:h,contentId:(0,D.useId)(),open:k,onOpenToggle:c.useCallback(()=>l(a=>!a),[l]),children:(0,b.jsx)(A.Primitive.div,{"data-state":P(k),"data-disabled":h?"":void 0,...j,ref:d})})});J.displayName=E;var K="CollapsibleTrigger",L=c.forwardRef((a,c)=>{let{__scopeCollapsible:d,...e}=a,f=I(K,d);return(0,b.jsx)(A.Primitive.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":P(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...e,ref:c,onClick:(0,y.composeEventHandlers)(a.onClick,f.onOpenToggle)})});L.displayName=K;var M="CollapsibleContent",N=c.forwardRef((a,c)=>{let{forceMount:d,...e}=a,f=I(M,a.__scopeCollapsible);return(0,b.jsx)(C.Presence,{present:d||f.open,children:({present:a})=>(0,b.jsx)(O,{...e,ref:c,present:a})})});N.displayName=M;var O=c.forwardRef((a,d)=>{let{__scopeCollapsible:e,present:f,children:g,...h}=a,i=I(M,e),[j,k]=c.useState(f),l=c.useRef(null),m=(0,x.useComposedRefs)(d,l),n=c.useRef(0),o=n.current,p=c.useRef(0),q=p.current,r=i.open||j,s=c.useRef(r),t=c.useRef(void 0);return c.useEffect(()=>{let a=requestAnimationFrame(()=>s.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,B.useLayoutEffect)(()=>{let a=l.current;if(a){t.current=t.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();n.current=b.height,p.current=b.width,s.current||(a.style.transitionDuration=t.current.transitionDuration,a.style.animationName=t.current.animationName),k(f)}},[i.open,f]),(0,b.jsx)(A.Primitive.div,{"data-state":P(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!r,...h,ref:m,style:{"--radix-collapsible-content-height":o?`${o}px`:void 0,"--radix-collapsible-content-width":q?`${q}px`:void 0,...a.style},children:r&&g})});function P(a){return a?"open":"closed"}var Q=a.i(53679),R="Accordion",S=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[T,U,V]=(0,w.createCollection)(R),[W,X]=(0,v.createContextScope)(R,[V,G]),Y=G(),Z=c.default.forwardRef((a,c)=>{let{type:d,...e}=a;return(0,b.jsx)(T.Provider,{scope:a.__scopeAccordion,children:"multiple"===d?(0,b.jsx)(ad,{...e,ref:c}):(0,b.jsx)(ac,{...e,ref:c})})});Z.displayName=R;var[$,_]=W(R),[aa,ab]=W(R,{collapsible:!1}),ac=c.default.forwardRef((a,d)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},collapsible:h=!1,...i}=a,[j,k]=(0,z.useControllableState)({prop:e,defaultProp:f,onChange:g});return(0,b.jsx)($,{scope:a.__scopeAccordion,value:j?[j]:[],onItemOpen:k,onItemClose:c.default.useCallback(()=>h&&k(""),[h,k]),children:(0,b.jsx)(aa,{scope:a.__scopeAccordion,collapsible:h,children:(0,b.jsx)(ag,{...i,ref:d})})})}),ad=c.default.forwardRef((a,d)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},...h}=a,[i=[],j]=(0,z.useControllableState)({prop:e,defaultProp:f,onChange:g}),k=c.default.useCallback(a=>j((b=[])=>[...b,a]),[j]),l=c.default.useCallback(a=>j((b=[])=>b.filter(b=>b!==a)),[j]);return(0,b.jsx)($,{scope:a.__scopeAccordion,value:i,onItemOpen:k,onItemClose:l,children:(0,b.jsx)(aa,{scope:a.__scopeAccordion,collapsible:!0,children:(0,b.jsx)(ag,{...h,ref:d})})})}),[ae,af]=W(R),ag=c.default.forwardRef((a,d)=>{let{__scopeAccordion:e,disabled:f,dir:g,orientation:h="vertical",...i}=a,j=c.default.useRef(null),k=(0,x.useComposedRefs)(j,d),l=U(e),m="ltr"===(0,Q.useDirection)(g),n=(0,y.composeEventHandlers)(a.onKeyDown,a=>{if(!S.includes(a.key))return;let b=a.target,c=l().filter(a=>!a.ref.current?.disabled),d=c.findIndex(a=>a.ref.current===b),e=c.length;if(-1===d)return;a.preventDefault();let f=d,g=e-1,i=()=>{(f=d+1)>g&&(f=0)},j=()=>{(f=d-1)<0&&(f=g)};switch(a.key){case"Home":f=0;break;case"End":f=g;break;case"ArrowRight":"horizontal"===h&&(m?i():j());break;case"ArrowDown":"vertical"===h&&i();break;case"ArrowLeft":"horizontal"===h&&(m?j():i());break;case"ArrowUp":"vertical"===h&&j()}let k=f%e;c[k].ref.current?.focus()});return(0,b.jsx)(ae,{scope:e,disabled:f,direction:g,orientation:h,children:(0,b.jsx)(T.Slot,{scope:e,children:(0,b.jsx)(A.Primitive.div,{...i,"data-orientation":h,ref:k,onKeyDown:f?void 0:n})})})}),ah="AccordionItem",[ai,aj]=W(ah),ak=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,value:e,...f}=a,g=af(ah,d),h=_(ah,d),i=Y(d),j=(0,D.useId)(),k=e&&h.value.includes(e)||!1,l=g.disabled||a.disabled;return(0,b.jsx)(ai,{scope:d,open:k,disabled:l,triggerId:j,children:(0,b.jsx)(J,{"data-orientation":g.orientation,"data-state":ar(k),...i,...f,ref:c,disabled:l,open:k,onOpenChange:a=>{a?h.onItemOpen(e):h.onItemClose(e)}})})});ak.displayName=ah;var al="AccordionHeader",am=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=af(R,d),g=aj(al,d);return(0,b.jsx)(A.Primitive.h3,{"data-orientation":f.orientation,"data-state":ar(g.open),"data-disabled":g.disabled?"":void 0,...e,ref:c})});am.displayName=al;var an="AccordionTrigger",ao=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=af(R,d),g=aj(an,d),h=ab(an,d),i=Y(d);return(0,b.jsx)(T.ItemSlot,{scope:d,children:(0,b.jsx)(L,{"aria-disabled":g.open&&!h.collapsible||void 0,"data-orientation":f.orientation,id:g.triggerId,...i,...e,ref:c})})});ao.displayName=an;var ap="AccordionContent",aq=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=af(R,d),g=aj(ap,d),h=Y(d);return(0,b.jsx)(N,{role:"region","aria-labelledby":g.triggerId,"data-orientation":f.orientation,...h,...e,ref:c,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});function ar(a){return a?"open":"closed"}aq.displayName=ap;var as=a.i(5202);function at({...a}){return(0,b.jsx)(Z,{"data-slot":"accordion",...a})}function au({className:a,...c}){return(0,b.jsx)(ak,{"data-slot":"accordion-item",className:(0,n.cn)("border-b last:border-b-0",a),...c})}function av({className:a,children:c,...d}){return(0,b.jsx)(am,{className:"flex",children:(0,b.jsxs)(ao,{"data-slot":"accordion-trigger",className:(0,n.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",a),...d,children:[c,(0,b.jsx)(as.ChevronDownIcon,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function aw({className:a,children:c,...d}){return(0,b.jsx)(aq,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...d,children:(0,b.jsx)("div",{className:(0,n.cn)("pt-0 pb-4",a),children:c})})}var ax=a.i(88237),ay=a.i(87682),az=a.i(11634),aA=a.i(48561),aB=a.i(6665),aC=a.i(69964),aD=a.i(16919);function aE(a){return a?a.replace(/_/g," ").split(" ").map(a=>a?a[0].toUpperCase()+a.slice(1):a).join(" "):"Unknown"}function aF(a){if(!a)return"outline";let b=a.toLowerCase();return["approved","verified","accepted"].includes(b)?"default":["rejected","declined","invalid"].includes(b)?"destructive":["pending","submitted","in_review","processing","awaiting_review"].includes(b)?"secondary":"outline"}function aG(){let a=(0,e.useRouter)(),g=(0,e.useSearchParams)(),h=g.get("teamId"),i=(0,c.useRef)((0,aA.getStoredPOCTeams)()),[k,n]=(0,c.useState)(i.current),[p,q]=(0,c.useState)(0===i.current.length),[r,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(h),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),M=(0,c.useRef)(i.current.length>0),{toast:N}=(0,m.useToast)();(0,c.useEffect)(()=>{let a=!1;return(async()=>{M.current||q(!0),v(null);try{let b=await az.authService.getPOCTeams();if(a)return;n(b),x(a=>a?b.some(b=>String(b.id)===a)?a:null:a),M.current=b.length>0}catch(b){if(a)return;v(b instanceof Error?b.message:"Unable to load assigned teams.")}finally{a||q(!1)}})(),()=>{a=!0}},[]);let O=(0,c.useMemo)(()=>new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}),[]);(0,c.useEffect)(()=>{h&&h!==w&&x(h)},[h,w]);let P=(0,c.useCallback)(b=>{if(b===w)return;x(b);let c=new URLSearchParams(g.toString());c.set("teamId",b),a.replace(`?${c.toString()}`,{scroll:!1})},[a,g,w]),Q=w??y?.id??void 0,R=(0,c.useCallback)(async a=>{H(!0),J(null);try{let b=await (0,o.getTeamDocumentHistory)(a);F(b)}catch(a){console.error("Team document history error",a),J(a instanceof Error?a.message:"Unable to load document history.")}finally{H(!1)}},[]),S=(0,c.useCallback)(()=>{Q&&R(Q)},[Q,R]),T=(0,c.useCallback)(async a=>{if(a){L(a);try{let{download_url:b}=await (0,o.getDownloadURL)(a)}catch(a){console.error("Document download failed",a),N({variant:"destructive",title:"Download failed",description:a instanceof Error?a.message:"Unable to fetch download link."})}finally{L(null)}}},[N]);(0,c.useEffect)(()=>{let a=!0;if(!w){z(null),B(!1),D(null);return}return(async()=>{B(!0),D(null);try{let b=await az.authService.getPOCTeamDetail(w);a&&z(b)}catch(b){a&&D(b?.message||"Unable to load team information")}finally{a&&B(!1)}})(),()=>{a=!1}},[w]),(0,c.useEffect)(()=>{Q?R(Q):F([])},[Q,R]);let U=(0,c.useMemo)(()=>y?.members?[...y.members].sort((a,b)=>{let c=a=>{if(!a)return 5;let b=a.toLowerCase();return b.includes("leader")?0:b.includes("mentor")?1:b.includes("faculty")?2:3};return c(a.role)-c(b.role)}):[],[y]),V=y?.faculty_mentor,W=U.find(a=>a.role?.toLowerCase().includes("leader"));return(0,b.jsx)(t.DashboardShell,{children:(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",style:{color:"#002449"},children:"Document Submission"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload mandatory documentation for verification ahead of the Grand Finale."})]}),(0,b.jsxs)("div",{className:"flex w-full flex-col gap-3 md:w-auto md:items-end",children:[(0,b.jsxs)("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[(0,b.jsx)("div",{className:"w-full min-w-[220px] sm:w-64",children:(0,b.jsxs)(ay.Select,{value:w??void 0,onValueChange:P,disabled:p||0===k.length,children:[(0,b.jsx)(ay.SelectTrigger,{className:"w-full border border-[#002449]/40 focus:border-[#002449] focus:ring-[#002449]/20",children:(0,b.jsx)(ay.SelectValue,{placeholder:p?"Loading teams...":"Select a team"})}),(0,b.jsx)(ay.SelectContent,{children:(0,b.jsx)(ay.SelectGroup,{children:k.map(a=>(0,b.jsx)(ay.SelectItem,{value:a.id,children:(0,b.jsx)("div",{className:"flex flex-col",children:(0,b.jsx)("span",{className:"font-medium text-sm text-gray-900",children:a.name})})},a.id))})})]})}),(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:w&&(0,b.jsx)(j.Button,{asChild:!0,variant:"secondary",size:"sm",children:(0,b.jsx)(d.default,{href:`/poc/teams/${w}`,children:"View Team Details"})})})]}),r&&(0,b.jsx)("p",{className:"text-xs font-medium text-destructive",children:r})]})]}),!w&&!p&&!r&&k.length>0&&(0,b.jsx)(u.Card,{className:"p-6 border-dashed border-[#f75700] bg-[#f75700]/5",children:(0,b.jsx)("p",{className:"text-sm text-gray-700",children:"Select a team using the dropdown above to manage document submissions. Once chosen, you can upload and review files for that team here."})}),C&&(0,b.jsx)(u.Card,{className:"border border-red-200 bg-red-50 p-4",children:(0,b.jsx)("p",{className:"text-sm text-red-800",children:C})}),A&&(0,b.jsxs)(u.Card,{className:"p-10 flex flex-col items-center justify-center gap-4",children:[(0,b.jsx)(f.Loader2,{className:"w-6 h-6 animate-spin text-[#f75700]"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading team information..."})]}),y&&!A&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(u.Card,{className:"p-6 border border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",style:{color:"#002449"},children:y.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:y.institution}),y.problem_statement&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold bg-[#002449]/10 text-[#002449]",children:["Problem Statement ID: ",y.problem_statement.id]})]}),W&&(0,b.jsxs)("div",{className:"bg-[#f75700]/10 border border-[#f75700]/30 rounded-lg p-4 min-w-[220px]",children:[(0,b.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-[#f75700] font-semibold",children:"Team Leader"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:W.user?.name||W.user?.email}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground break-all",children:W.user?.email})]})]})}),I&&(0,b.jsx)(u.Card,{className:"border border-destructive/20 bg-destructive/5 p-4",children:(0,b.jsx)("p",{className:"text-xs text-destructive",children:I})}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(aB.Users,{className:"w-5 h-5 text-[#002449]"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",style:{color:"#002449"},children:"Mentor & Team Members"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[V&&(0,b.jsxs)(u.Card,{className:"p-4 border border-[#002449]/20 bg-[#002449]/5",children:[(0,b.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-[#002449] font-semibold",children:"Faculty Mentor"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:V.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Official contact shared during onboarding."})]}),U.map(a=>(0,b.jsxs)(u.Card,{className:"p-4 border border-gray-200",children:[(0,b.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-gray-500 font-semibold",children:a.role}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:a.user.name||a.user.email}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground break-all",children:a.user.email})]},a.user.email))]})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",style:{color:"#002449"},children:"Document Categories"}),(0,b.jsx)(at,{type:"multiple",className:"space-y-3",children:aD.DOCUMENT_SECTIONS.map(({id:a,title:c,icon:d,description:e,requirements:g,documentType:h,accept:i})=>{let k=E.find(a=>a.document_type===h),m=k?.versions?[...k.versions].sort((a,b)=>(b.version??0)-(a.version??0)):[],n=k?.latest_version??m[0],o=k?.latest_status??n?.status,p=(0,aD.isApprovedStatus)(o),q=k?.requires_upload??(!n&&!k?.pending_review),r=k?.pending_review??!1,t=q&&!n?"Awaiting Upload":aE(o),u=q&&!n?"outline":aF(o),v=n?.uploaded_at?O.format(new Date(n.uploaded_at)):null,w=n?.rejection_reason;return(0,b.jsxs)(au,{value:a,className:"border border-gray-200 rounded-lg",children:[(0,b.jsxs)(av,{className:"px-4 py-3 text-left items-center",children:[(0,b.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[(0,b.jsx)(d,{className:"w-5 h-5 text-[#f75700]"}),(0,b.jsx)("span",{className:"font-semibold text-sm md:text-base text-gray-900",children:c})]}),p&&(0,b.jsx)(aC.CheckCircle2,{className:"h-4 w-4 text-emerald-500","aria-label":"Document approved"})]}),(0,b.jsxs)(aw,{className:"px-4 pb-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:e}),(0,b.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-700",children:g.map(a=>(0,b.jsx)("li",{children:a},a))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s,{teamId:Q,documentType:h,label:c,accept:i,onUploaded:S,disabled:p,disabledReason:p?"This document is already approved. Uploading a new file is disabled.":void 0}),(0,b.jsxs)("div",{className:"space-y-2 text-xs",children:[G?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(f.Loader2,{className:"h-3 w-3 animate-spin"})," Updating status..."]}):(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(l.Badge,{variant:u,children:t}),r&&(0,b.jsx)(l.Badge,{variant:"secondary",children:"Pending Review"}),!p&&q&&(0,b.jsx)("span",{className:"text-muted-foreground",children:"Upload required"}),v&&(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Last update: ",v]})]}),w&&!G&&(0,b.jsxs)("p",{className:"text-xs text-destructive",children:["Rejection note: ",w]}),!G&&0===m.length&&!q&&(0,b.jsx)("p",{className:"text-muted-foreground",children:"No previous uploads recorded."})]}),!G&&m.length>0&&(0,b.jsx)("div",{className:"rounded-lg border border-dashed border-[#002449]/15 bg-white/60",children:(0,b.jsxs)(ax.Table,{children:[(0,b.jsx)(ax.TableHeader,{children:(0,b.jsxs)(ax.TableRow,{children:[(0,b.jsx)(ax.TableHead,{className:"w-[70px]",children:"Version"}),(0,b.jsx)(ax.TableHead,{children:"Status"}),(0,b.jsx)(ax.TableHead,{children:"File"}),(0,b.jsx)(ax.TableHead,{children:"Uploaded"}),(0,b.jsx)(ax.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(ax.TableBody,{children:m.map(a=>{let c=a.uploaded_at?O.format(new Date(a.uploaded_at)):"—",d=aE(a.status),e=aF(a.status),g=K===a.id;return(0,b.jsxs)(ax.TableRow,{children:[(0,b.jsx)(ax.TableCell,{className:"font-mono text-xs",children:a.version??"—"}),(0,b.jsx)(ax.TableCell,{children:(0,b.jsx)(l.Badge,{variant:e,children:d})}),(0,b.jsx)(ax.TableCell,{className:"text-xs text-muted-foreground",children:a.original_filename||"—"}),(0,b.jsx)(ax.TableCell,{className:"text-xs text-muted-foreground",children:c}),(0,b.jsx)(ax.TableCell,{className:"text-right",children:(0,b.jsx)(j.Button,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>T(a.id),disabled:g,children:g?(0,b.jsx)(f.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):"View"})})]},a.id)})})]})})]})]})]},a)})})]})]})]})})}function aH(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(t.DashboardShell,{children:(0,b.jsxs)("div",{className:"flex h-full items-center justify-center py-20",children:[(0,b.jsx)(f.Loader2,{className:"mr-3 h-5 w-5 animate-spin text-[#f75700]"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading document submission…"})]})}),children:(0,b.jsx)(aG,{})})}a.s(["default",()=>aH],70286)}];

//# sourceMappingURL=app_poc_document-submission_page_tsx_9b9c93de._.js.map