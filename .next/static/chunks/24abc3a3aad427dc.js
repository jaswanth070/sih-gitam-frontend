(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";var s=e.i(1972),t=e.i(75305),a=e.i(2854),l=e.i(30499),r=e.i(70065),i=e.i(14077),d=e.i(35188),n=e.i(29108),c=e.i(10965);let o=(0,c.default)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),m=(0,c.default)("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);var x=e.i(45642),h=e.i(15278),u=e.i(79971),p=e.i(2870);function g({user:e}={}){let a=(0,n.getStoredLeaderTeam)(),[l,r]=(0,t.useState)(a),[d,c]=(0,t.useState)(!a),[j,b]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{try{let e=await i.authService.getTeamDetails();r(e)}catch(e){b(e.message||"Failed to load team")}finally{c(!1)}})()},[]);let f=(0,t.useMemo)(()=>{if(!l)return[];let e=new Map,s=s=>{if(!s)return;let t=s.id||s.email||`${s.name??""}_${s.phone??""}`;e.has(t)||e.set(t,s)};return s(l.faculty_mentor),s(l.faculty_mentor_1),s(l.faculty_mentor_2),Array.isArray(l.mentors)&&l.mentors.forEach(s),Array.from(e.values())},[l]),N=l?.team_id||"Not assigned",v=l?.members?.length??0,y=(0,t.useMemo)(()=>{if(!l?.poc)return[];let e=l.poc;return[{label:"Email",value:e.email},{label:"Phone",value:e.phone},{label:"Designation",value:e.designation},{label:"Role",value:e.role}].filter(e=>e.value&&String(e.value).trim().length>0)},[l]),w=(0,t.useMemo)(()=>{if(!l?.problem_statement)return[];let e=[];return l.problem_statement.id&&e.push({label:"Problem Statement ID",value:`#${l.problem_statement.id}`}),l.problem_statement.title&&e.push({label:"Title",value:l.problem_statement.title}),e},[l]),T=(0,t.useMemo)(()=>{if(!l)return[];let e=[];l.institution&&e.push({label:"Institution",value:l.institution});let s=l.department;s&&e.push({label:"Department",value:s});let t=l.track||l.category;t&&e.push({label:"Track",value:t});let a=l.state,r=l.city;if(a||r){let s=[r,a].filter(Boolean).join(", ");e.push({label:"Location",value:s})}return e},[N,l]);return d?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})}):(0,s.jsxs)("div",{className:"space-y-8 pb-10",children:[(0,s.jsxs)("section",{className:"relative overflow-hidden rounded-3xl border border-[#002449]/15 bg-gradient-to-br from-[#002449]/10 via-white to-white p-8 shadow-sm md:p-12",children:[(0,s.jsx)("div",{className:"absolute -right-20 -top-20 h-56 w-56 rounded-full bg-[#002449]/10 blur-3xl","aria-hidden":"true"}),(0,s.jsx)("div",{className:"absolute -left-24 top-10 h-48 w-48 rounded-full bg-[#f75700]/15 blur-3xl","aria-hidden":"true"}),(0,s.jsx)("div",{className:"absolute -right-10 bottom-[-60px] h-60 w-60 rounded-full bg-[#0b8f6f]/20 blur-3xl","aria-hidden":"true"}),(0,s.jsxs)("div",{className:"relative space-y-6",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-[#002449] shadow-sm",children:[(0,s.jsx)(p.Users,{className:"h-3.5 w-3.5"}),"Team Leader Dashboard"]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-[#002449] md:text-4xl",children:l?`${l.name}`:"Team Leader Workspace"})}),l&&(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-[#002449]",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-semibold shadow-sm",children:[(0,s.jsx)(m,{className:"h-4 w-4"}),"Team ID: ",N]}),l.problem_statement?.id&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/30 bg-white/15 px-3 py-1 font-semibold text-[#002449] shadow-sm backdrop-blur",children:[(0,s.jsx)(x.Layers,{className:"h-4 w-4"}),l.problem_statement.id]}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 font-semibold shadow-sm",children:[(0,s.jsx)(o,{className:"h-4 w-4"}),"HARDWARE"]})]})]})]}),j&&(0,s.jsx)("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-4 text-sm text-red-800 shadow-sm",children:j}),l?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,2.2fr)_minmax(0,1fr)]",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"Problem Statement Overview"})}),w.length>0?(0,s.jsx)("dl",{className:"mt-6 grid gap-4 text-sm text-gray-700 sm:grid-cols-2",children:w.map(e=>(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("dt",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:e.label}),(0,s.jsx)("dd",{className:"font-medium text-gray-900",children:e.value})]},e.label))}):(0,s.jsx)("p",{className:"mt-6 text-sm text-gray-600",children:"Problem statement details are not available yet."}),l.problem_statement?.description&&(0,s.jsxs)("div",{className:"mt-6 rounded-xl border border-gray-100 bg-gray-50 p-4 text-sm text-gray-700",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"Summary"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:l.problem_statement.description})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"Team Roster"}),(0,s.jsxs)("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:[v," member",1===v?"":"s"]})]}),v>0?(0,s.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:l.members.map(e=>{let t=function(e){if(!e)return"TL";let s=e.split(" ").filter(Boolean).slice(0,2);return 0===s.length?"TL":s.map(e=>e.charAt(0).toUpperCase()).join("")}(e.user.name);return(0,s.jsxs)("div",{className:"rounded-xl border border-gray-100 bg-gray-50 p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white text-sm font-semibold text-[#002449] shadow",children:t}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.user.name}),(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#f75700]",children:e.role||"Member"})]})]}),(0,s.jsxs)("div",{className:"mt-4 space-y-1 text-xs text-gray-600",children:[(0,s.jsxs)("p",{className:"flex items-center gap-2 break-all",children:[(0,s.jsx)(h.Mail,{className:"h-3.5 w-3.5 text-[#002449]"}),e.user.email]}),e.phone&&(0,s.jsxs)("p",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Phone,{className:"h-3.5 w-3.5 text-[#002449]"}),e.phone]})]})]},e.id||e.user.email)})}):(0,s.jsx)("p",{className:"mt-6 text-sm text-gray-600",children:"Team roster details are not available yet."})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"POC Details"}),l.poc?(0,s.jsxs)("div",{className:"mt-4 space-y-4 text-sm text-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-base font-semibold text-gray-900",children:l.poc.name||"Not provided"}),l.poc.role&&(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#f75700]",children:l.poc.role})]}),l.poc.is_verified_poc&&(0,s.jsx)("span",{className:"rounded-full bg-[#078e31]/10 px-3 py-1 text-xs font-semibold text-[#078e31]",children:"Verified"})]}),(0,s.jsx)("dl",{className:"space-y-3",children:y.length>0?y.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:e.label}),(0,s.jsx)("dd",{className:"font-medium text-gray-900",children:e.value})]},e.label)):(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"No additional POC details available."})})]}):(0,s.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"A point of contact has not been assigned yet."})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"Institute"}),T.length>0?(0,s.jsx)("dl",{className:"mt-4 space-y-3 text-sm text-gray-700",children:T.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)("dd",{className:"font-medium text-gray-900",children:e.value})},e.label))}):(0,s.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"Institute information is not available yet."})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"Faculty Mentors"}),(0,s.jsx)(o,{className:"h-6 w-6 text-[#f75700]"})]}),f.length>0?(0,s.jsx)("ul",{className:"mt-6 space-y-4",children:f.map(e=>(0,s.jsxs)("li",{className:"rounded-xl border border-gray-100 bg-gray-50 p-4 shadow-sm",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.name||"Unnamed mentor"}),(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#f75700]",children:e.role||e.designation||"Faculty mentor"}),e.designation&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.designation})]})}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2 text-xs text-gray-600",children:[e.email&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-2 py-1 font-medium text-[#002449] shadow",children:[(0,s.jsx)(h.Mail,{className:"h-3.5 w-3.5"}),e.email]}),e.phone&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-2 py-1 font-medium text-[#002449] shadow",children:[(0,s.jsx)(u.Phone,{className:"h-3.5 w-3.5"}),e.phone]})]})]},e.id||e.email||e.name))}):(0,s.jsx)("p",{className:"mt-6 text-sm text-gray-600",children:"No mentor information found. Ask your faculty coordinators to confirm mentor details in the admin portal."})]})]})]})}):(0,s.jsxs)("div",{className:"rounded-2xl border border-dashed border-gray-300 bg-white p-12 text-center shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#002449]",children:"No team data available"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Once your profile is linked to a team, its stats and roster will appear here."})]})]})}var j=e.i(87524),b=e.i(10552),f=e.i(72809),N=e.i(13637),v=e.i(90768);let y=(0,c.default)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var w=e.i(23284),T=e.i(34290),C=e.i(88771),k=e.i(66758),_=e.i(74117),S=e.i(67881),L=e.i(94179),M=e.i(47627);function A({user:e}){let{toast:l}=(0,_.useToast)(),[d,n]=(0,t.useState)(!0),[c,o]=(0,t.useState)(!1),[m,h]=(0,t.useState)([]),[u,g]=(0,t.useState)({results:[],count:0}),[A,B]=(0,t.useState)([]),[P,U]=(0,t.useState)([]),[H,R]=(0,t.useState)(null),[$,q]=(0,t.useState)(null),O=(0,t.useCallback)(async()=>{U([]),o(!0);try{let[e,s,t]=await Promise.allSettled([i.authService.getAdminTeams(),C.requestsService.getFilteredQueueSnapshot({include_positions:!0,page:1,page_size:12}),(0,k.getDocumentDashboardOverview)()]);"fulfilled"===e.status?h(e.value||[]):(console.error("Admin teams load failed",e.reason),U(e=>[...e,"Unable to load teams."])),"fulfilled"===s.status?g({results:s.value.results||[],count:s.value.count||0}):(console.error("Queue snapshot load failed",s.reason),U(e=>[...e,"Unable to load virtual queue data."])),"fulfilled"===t.status?B(t.value||[]):(console.error("Pending documents load failed",t.reason),U(e=>[...e,"Unable to load pending documents."]))}finally{n(!1),o(!1)}},[]);(0,t.useEffect)(()=>{O()},[O]);let V=(0,t.useMemo)(()=>m.reduce((e,s)=>e+(s.members?.length||0),0),[m]),E=(0,t.useMemo)(()=>u.results.slice(0,6),[u.results]),z=(0,t.useMemo)(()=>A.filter(e=>e.pending_review),[A]),I=(0,t.useMemo)(()=>z.filter(e=>e.latest_version?.id),[z]),F=(0,t.useMemo)(()=>A.filter(e=>e.requires_upload),[A]),W=F.length,Q=(0,t.useCallback)(e=>e?e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"Unknown",[]),K=(0,t.useCallback)(e=>e?e.replace(/_/g," ").split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1):e).join(" "):"Unknown",[]),G=(0,t.useCallback)(e=>{if(!e)return"outline";let s=e.toLowerCase();return["approved","verified","accepted"].includes(s)?"default":["rejected","declined","invalid"].includes(s)?"destructive":["pending","submitted","in_review","processing","awaiting_review","pending_review"].includes(s)?"secondary":"outline"},[]),J=async(e,s)=>{R(e);try{"approve"===s?(await (0,k.approveDocument)(e),l({title:"Document approved",description:"The team has been notified about the approval."})):(await (0,k.rejectDocument)(e),l({variant:"destructive",title:"Document rejected",description:"The team has been notified to re-upload the document."})),await O()}catch(e){console.error(`Document ${s} failed`,e),l({variant:"destructive",title:"Action failed",description:e instanceof Error?e.message:`Unable to ${s} document.`})}finally{R(null)}},X=async e=>{q(e);try{let{download_url:s}=await (0,k.getDownloadURL)(e);window.open(s,"_blank","noopener,noreferrer")}catch(e){console.error("Download link error",e),l({variant:"destructive",title:"Download failed",description:e instanceof Error?e.message:"Unable to fetch download link."})}finally{q(null)}},Z=(0,t.useMemo)(()=>{let s=e?.name?.split(" ")[0]||"Admin";return`Welcome, ${s}`},[e?.name]);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight flex items-center gap-2",style:{color:"#002449"},children:[(0,s.jsx)(w.ShieldCheck,{className:"h-6 w-6 text-[#002449]"})," ",Z]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Comprehensive view of teams, requests, and document verifications."})]}),(0,s.jsxs)(S.Button,{size:"sm",variant:"outline",className:"gap-2",onClick:O,disabled:c,children:[c?(0,s.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(y,{className:"h-4 w-4"})," Refresh data"]})]}),(d||P.length>0)&&(0,s.jsx)("div",{className:"space-y-3",children:P.map((e,t)=>(0,s.jsxs)(r.Card,{className:"p-4 border border-destructive/20 bg-destructive/5 flex items-start gap-3",role:"alert",children:[(0,s.jsx)(j.AlertCircle,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-destructive",children:e})]},t))}),(0,s.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,s.jsxs)(r.Card,{className:"p-5 border border-gray-200 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Total Teams"}),(0,s.jsx)("p",{className:"text-2xl font-bold",style:{color:"#002449"},children:m.length})]}),(0,s.jsx)(p.Users,{className:"h-8 w-8 text-[#002449]"})]}),(0,s.jsxs)("p",{className:"mt-3 text-xs text-muted-foreground",children:["Aggregated across all POCs. ",V," participants tracked."]}),(0,s.jsx)(S.Button,{asChild:!0,variant:"link",className:"px-0 text-xs text-[#002449]",children:(0,s.jsx)(a.default,{href:"/dashboard",children:"Manage teams"})})]}),(0,s.jsxs)(r.Card,{className:"p-5 border border-gray-200 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Virtual Queue"}),(0,s.jsx)("p",{className:"text-2xl font-bold",style:{color:"#002449"},children:u.count})]}),(0,s.jsx)(x.Layers,{className:"h-8 w-8 text-[#002449]"})]}),(0,s.jsx)("p",{className:"mt-3 text-xs text-muted-foreground",children:"Requests awaiting processing across all categories."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(S.Button,{asChild:!0,variant:"outline",size:"sm",className:"text-xs",children:(0,s.jsx)(a.default,{href:"/queue",children:"View queue"})}),(0,s.jsx)(S.Button,{asChild:!0,variant:"outline",size:"sm",className:"text-xs",children:(0,s.jsx)(a.default,{href:"/requests",children:"All requests"})})]})]}),(0,s.jsxs)(r.Card,{className:"p-5 border border-gray-200 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Pending Documents"}),(0,s.jsx)("p",{className:"text-2xl font-bold",style:{color:"#002449"},children:z.length})]}),(0,s.jsx)(D,{})]}),(0,s.jsxs)("p",{className:"mt-3 text-xs text-muted-foreground",children:["Awaiting verification before disbursements and onboarding.",W>0&&` ${W} document${1===W?" requires":"s require"} an initial upload.`]})]})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",style:{color:"#002449"},children:"All Teams"}),(0,s.jsxs)(L.Badge,{variant:"secondary",children:[m.length," teams"]})]}),(0,s.jsx)(r.Card,{className:"border border-gray-200",children:d&&0===m.length?(0,s.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,s.jsx)(v.Loader2,{className:"h-5 w-5 animate-spin text-[#002449]"})}):0===m.length?(0,s.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"No teams available."}):(0,s.jsxs)(M.Table,{children:[(0,s.jsx)(M.TableHeader,{children:(0,s.jsxs)(M.TableRow,{children:[(0,s.jsx)(M.TableHead,{children:"Team"}),(0,s.jsx)(M.TableHead,{children:"Institution"}),(0,s.jsx)(M.TableHead,{children:"Problem Statement"}),(0,s.jsx)(M.TableHead,{children:"POC"}),(0,s.jsx)(M.TableHead,{children:"Leader"}),(0,s.jsx)(M.TableHead,{children:"Members"})]})}),(0,s.jsx)(M.TableBody,{children:m.map(e=>{let t=e.members?.find(e=>e.role?.toLowerCase().includes("leader")),a=e.poc?.name||e.poc?.email||"-",l=e.problem_statement?.id?`${e.problem_statement.id}`:"Not assigned";return(0,s.jsxs)(M.TableRow,{className:"align-top",children:[(0,s.jsx)(M.TableCell,{className:"font-medium",style:{color:"#002449"},children:e.name}),(0,s.jsx)(M.TableCell,{className:"max-w-[220px] truncate",title:e.institution,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Building2,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,s.jsx)("span",{children:e.institution})]})}),(0,s.jsx)(M.TableCell,{className:"text-xs text-muted-foreground max-w-[260px]",children:l}),(0,s.jsxs)(M.TableCell,{className:"text-xs",children:[a,e.poc?.email&&(0,s.jsx)("div",{className:"text-muted-foreground",children:e.poc.email})]}),(0,s.jsxs)(M.TableCell,{className:"text-xs",children:[t?.user?.name||t?.user?.email||"-",t?.user?.email&&(0,s.jsx)("div",{className:"text-muted-foreground",children:t.user.email})]}),(0,s.jsx)(M.TableCell,{className:"text-xs text-muted-foreground",children:e.members?.length??0})]},e.id)})}),(0,s.jsx)(M.TableCaption,{children:"Snapshot of every registered team under the current cohort."})]})})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",style:{color:"#002449"},children:"Virtual Queue Overview"}),(0,s.jsxs)(L.Badge,{variant:"outline",children:[u.count," total"]})]}),(0,s.jsx)(r.Card,{className:"border border-gray-200",children:d&&0===E.length?(0,s.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,s.jsx)(v.Loader2,{className:"h-5 w-5 animate-spin text-[#002449]"})}):0===E.length?(0,s.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"Queue is currently empty."}):(0,s.jsxs)(M.Table,{children:[(0,s.jsx)(M.TableHeader,{children:(0,s.jsxs)(M.TableRow,{children:[(0,s.jsx)(M.TableHead,{children:"Team"}),(0,s.jsx)(M.TableHead,{children:"Category"}),(0,s.jsx)(M.TableHead,{children:"Status"}),(0,s.jsx)(M.TableHead,{children:"Submitted"})]})}),(0,s.jsx)(M.TableBody,{children:E.map(e=>(0,s.jsxs)(M.TableRow,{children:[(0,s.jsx)(M.TableCell,{className:"font-medium",style:{color:"#002449"},children:e.team_name||e.team_id}),(0,s.jsx)(M.TableCell,{className:"text-xs text-muted-foreground",children:e.category}),(0,s.jsx)(M.TableCell,{className:"text-xs",children:(0,s.jsx)(L.Badge,{variant:"Submitted"===e.status?"secondary":"outline",children:e.status})}),(0,s.jsx)(M.TableCell,{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleString()})]},e.id))}),(0,s.jsx)(M.TableCaption,{children:"Showing latest submissions. Visit the queue page for full controls."})]})})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",style:{color:"#002449"},children:"Pending Document Verification"}),(0,s.jsxs)(L.Badge,{variant:"outline",children:[z.length," awaiting review"]})]}),(0,s.jsx)(r.Card,{className:"border border-gray-200",children:d&&0===A.length?(0,s.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,s.jsx)(v.Loader2,{className:"h-5 w-5 animate-spin text-[#002449]"})}):0===A.length?(0,s.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"No documents need attention right now."}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(M.Table,{children:[(0,s.jsx)(M.TableHeader,{children:(0,s.jsxs)(M.TableRow,{children:[(0,s.jsx)(M.TableHead,{children:"Team"}),(0,s.jsx)(M.TableHead,{children:"Type"}),(0,s.jsx)(M.TableHead,{children:"Uploaded"}),(0,s.jsx)(M.TableHead,{children:"Status"}),(0,s.jsx)(M.TableHead,{children:"Actions"})]})}),(0,s.jsx)(M.TableBody,{children:0===I.length?(0,s.jsx)(M.TableRow,{children:(0,s.jsx)(M.TableCell,{colSpan:5,className:"text-center text-sm text-muted-foreground",children:"No documents awaiting review. Monitor the upload reminders below."})}):I.map(e=>{let t=e.latest_version,a=t?.uploaded_at?new Date(t.uploaded_at).toLocaleString():"—",l=t?.id||e.document_id||"",r=H===l,i=$===l,d=K(e.latest_status),n=G(e.latest_status);return(0,s.jsxs)(M.TableRow,{children:[(0,s.jsxs)(M.TableCell,{children:[(0,s.jsx)("div",{className:"font-medium",style:{color:"#002449"},children:e.team_name||e.team_id}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Version: ",t?.version??"—"]})]}),(0,s.jsx)(M.TableCell,{className:"text-xs text-muted-foreground",children:Q(e.document_type)}),(0,s.jsx)(M.TableCell,{className:"text-xs text-muted-foreground",children:a}),(0,s.jsx)(M.TableCell,{className:"text-xs",children:(0,s.jsx)(L.Badge,{variant:n,children:d})}),(0,s.jsx)(M.TableCell,{children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(S.Button,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>X(l),disabled:i||r,children:[i?(0,s.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(N.Download,{className:"h-4 w-4"}),"Download"]}),(0,s.jsxs)(S.Button,{size:"sm",variant:"secondary",className:"text-xs",onClick:()=>J(l,"approve"),disabled:r,children:[r?(0,s.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(f.Check,{className:"h-4 w-4"}),"Approve"]}),(0,s.jsxs)(S.Button,{size:"sm",variant:"destructive",className:"text-xs",onClick:()=>J(l,"reject"),disabled:r,children:[r?(0,s.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(T.X,{className:"h-4 w-4"}),"Reject"]})]})})]},l||`${e.team_id}-${e.document_type}`)})}),(0,s.jsx)(M.TableCaption,{children:"Use approve or reject to notify teams instantly."})]}),W>0&&(0,s.jsxs)("div",{className:"rounded-md border border-dashed border-[#002449]/30 bg-[#002449]/5 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,s.jsxs)("p",{className:"text-sm font-medium",style:{color:"#002449"},children:["Awaiting initial upload (",W,")"]}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Share reminders with POCs so teams can submit the missing files."})]}),(0,s.jsx)("div",{className:"mt-3 grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:F.slice(0,6).map(e=>(0,s.jsxs)("div",{className:"rounded-lg border border-[#002449]/20 bg-white px-3 py-2 text-xs text-muted-foreground",children:[(0,s.jsx)("div",{className:"font-medium text-[#002449]",children:e.team_name||e.team_id}),(0,s.jsx)("div",{children:Q(e.document_type)})]},`${e.team_id}-${e.document_type}`))}),F.length>6&&(0,s.jsxs)("p",{className:"mt-3 text-xs text-muted-foreground",children:["And ",F.length-6," more document",F.length-6==1?"":"s"," waiting for an upload."]})]})]})})]})]})}function D(){return(0,s.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-[#002449]",children:[(0,s.jsx)("path",{d:"M6 3h9l5 5v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M9 7h3m-3 4h6m-6 4h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}let B=(0,c.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var P=e.i(90449),U=e.i(6194);function H(){let e=(0,l.useRouter)(),[a,d]=(0,t.useState)(null),[n,c]=(0,t.useState)(null),[o,m]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{let s=i.authService.getAccessToken();if(!s)return void e.push("/login");try{let e=s.split(".");if(3===e.length){let s=JSON.parse(atob(e[1]));s.is_admin?d("admin"):s.is_poc?d("poc"):d("leader"),c(s)}}catch(e){console.error("Error decoding token:",e)}m(!1)},[e]),o)?(0,s.jsx)(U.DashboardShell,{children:(0,s.jsx)("div",{className:"min-h-[40vh] flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-accent border-t-primary rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground font-medium",children:"Loading dashboard..."})]})})}):(0,s.jsxs)(U.DashboardShell,{children:["admin"===a&&(0,s.jsx)(A,{user:n}),"leader"===a&&(0,s.jsx)(g,{user:n}),"poc"===a&&(0,s.jsx)(R,{user:n}),!a&&(0,s.jsxs)(r.Card,{className:"p-12 text-center",children:[(0,s.jsx)(j.AlertCircle,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground font-medium",children:"Unable to determine user role"})]})]})}function R({user:e}){let[a,i]=(0,t.useState)([]),[n,c]=(0,t.useState)(!0),[o,m]=(0,t.useState)(null),[x,h]=(0,t.useState)(null),u=(0,l.useRouter)();return((0,t.useEffect)(()=>{(async()=>{try{let e=await (0,d.getCachedPOCTeams)();i(e)}catch(e){h({type:"error",title:"Error",message:e.message||"Failed to load teams"})}finally{c(!1)}})()},[]),n)?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,s.jsxs)(r.Card,{className:"p-6 animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),(0,s.jsx)("div",{className:"h-12 bg-muted rounded"})]},e))}):(0,s.jsxs)("div",{className:"space-y-6","aria-label":"POC dashboard overview",children:[(0,s.jsxs)("header",{className:"space-y-1",children:[(0,s.jsxs)("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight flex items-center gap-2",style:{color:"#002449"},children:[(0,s.jsx)(p.Users,{className:"w-6 h-6 text-[#002449]"})," Welcome, ",e?.name?.split(" ")[0]||"POC"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Focused view of assigned teams."})]}),x&&(0,s.jsx)(r.Card,{className:"p-4 bg-destructive/5 border border-destructive/20 rounded-lg",role:"alert","aria-live":"polite",children:(0,s.jsxs)("p",{className:"text-destructive font-medium flex items-center gap-2 text-sm",children:[(0,s.jsx)(j.AlertCircle,{className:"w-4 h-4"})," ",x.message]})}),a.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4","aria-label":"Assigned teams list",children:a.map(e=>(0,s.jsx)($,{team:e,onView:()=>u.push(`/poc/teams/${e.id}`)},e.id))}):(0,s.jsxs)(r.Card,{className:"p-10 text-center rounded-xl",children:[(0,s.jsx)(p.Users,{className:"w-10 h-10 mx-auto text-muted-foreground mb-3"}),(0,s.jsx)("p",{className:"text-muted-foreground font-medium",children:"No teams assigned yet"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Check back later for team assignments"})]})]})}function $({team:e,onView:t}){let l=Array.isArray(e.members)?e.members.find(e=>e.role?.toLowerCase()==="leader")?.user?.name||"-":e.leader_name||"-",i=e.problem_statement?.id;return(0,s.jsxs)(r.Card,{role:"group","aria-label":`Team ${e.name}`,className:"p-4 rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md transition flex flex-col gap-3",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,s.jsx)("h3",{className:"font-semibold text-base leading-snug line-clamp-2",style:{color:"#002449"},children:e.name})}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 truncate",children:[(0,s.jsx)(P.User2,{className:"w-3 h-3"})," Leader: ",(0,s.jsx)("span",{className:"font-medium",children:l})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 truncate",children:[(0,s.jsx)(b.Building2,{className:"w-3 h-3"})," ",e.institution]}),i&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-[10px] font-semibold tracking-wide bg-[#f75700]/10 text-[#f75700] border border-[#f75700]/30 w-fit",children:[(0,s.jsx)(x.Layers,{className:"w-3 h-3"})," PS ID: ",i]}),(0,s.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,s.jsxs)(S.Button,{onClick:t,size:"sm",variant:"outline",className:"shrink-0 gap-1 text-xs","aria-label":`View details for team ${e.name}`,children:["View ",(0,s.jsx)(B,{className:"w-3 h-3"})]}),(0,s.jsx)(S.Button,{asChild:!0,size:"sm",className:"shrink-0 gap-1 text-xs bg-[#002449] hover:bg-[#001a33] text-white",children:(0,s.jsx)(a.default,{href:`/poc/document-submission?teamId=${e.id}`,"aria-label":`Document submission for team ${e.name}`,children:"Documents"})})]})]})}e.s(["default",()=>H],78928)}]);