(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35301,e=>{"use strict";let t=(0,e.i(10965).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],35301)},34290,e=>{"use strict";var t=e.i(34853);e.s(["X",()=>t.default])},13637,e=>{"use strict";let t=(0,e.i(10965).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],13637)},47627,e=>{"use strict";var t=e.i(1972),a=e.i(47163);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})})}function s({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...r})}function l({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r})}function i({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function n({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function o({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function d({className:e,...r}){return(0,t.jsx)("caption",{"data-slot":"table-caption",className:(0,a.cn)("text-muted-foreground mt-4 text-sm",e),...r})}e.s(["Table",()=>r,"TableBody",()=>l,"TableCaption",()=>d,"TableCell",()=>o,"TableHead",()=>n,"TableHeader",()=>s,"TableRow",()=>i])},15664,e=>{"use strict";var t=e.i(23284),a=e.i(10965);let r=(0,a.default)("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]),s=(0,a.default)("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),l=(0,a.default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var i=e.i(17348),n=e.i(96985);let o=[{id:"govt-id",title:"Government ID",icon:t.ShieldCheck,description:"Any one of the approved government-issued IDs for each of the six participants.",requirements:["Aadhaar","PAN","Passport","Voter ID","Driving Licence"],documentType:"govt_id",accept:"application/pdf,image/*"},{id:"college-id",title:"College / Institute ID",icon:r,description:"Upload the current academic ID card scans for all participants.",requirements:["Front side","Back side (if details are present)","Ensure validity for the current academic year"],documentType:"college_id",accept:"application/pdf,image/*"},{id:"consent-letter",title:"Consent Letter",icon:s,description:"Institution-issued consent letter authorising participation at the Grand Finale.",requirements:["Signed on official letterhead","Includes team name and problem statement ID","Signed by the competent authority"],documentType:"consent_letter",accept:"application/pdf"},{id:"bank-details",title:"Bank Details",icon:l,description:"Banking details for reimbursements (team leader preferred).",requirements:["Passbook first page or cancelled cheque","Account holder PAN","Bank IFSC and account number clearly visible"],documentType:"bank_details",accept:"application/pdf,image/*"},{id:"travel-allowance",title:"Travel Allowance Claims",icon:i.Plane,description:"Supporting documents for travel allowance claims.",requirements:["Travel tickets / boarding passes","Payment receipts (if applicable)","Travel dates matching event schedule"],documentType:"travel_allowance",accept:"application/pdf,image/*"},{id:"beneficiary-forms",title:"Beneficiary Forms",icon:n.FileSignature,description:"Duly filled beneficiary forms with signatures.",requirements:["Latest template provided by organisers","Signature of beneficiary and verifier","Date and contact information"],documentType:"beneficiary_form",accept:"application/pdf"}],d=o.reduce((e,t)=>(e[t.documentType]=t,e),{}),c=new Set(["approved","verified","accepted"]);function u(e){return!!e&&c.has(e.toLowerCase())}e.s(["DOCUMENT_SECTIONS",0,o,"DOCUMENT_SECTIONS_BY_TYPE",0,d,"isApprovedStatus",()=>u],15664)},1239,e=>{"use strict";var t=e.i(1972),a=e.i(75305),r=e.i(2854),s=e.i(30499),l=e.i(90768);let i=(0,e.i(10965).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var n=e.i(34290),o=e.i(13637),d=e.i(67881),c=e.i(23750),u=e.i(94179),m=e.i(74117),p=e.i(47163),x=e.i(66758);let f={idle:"Select a file to begin the upload process.",ready:"File selected. Click Upload to continue.",preparing:"Requesting a secure upload URL...",uploading:"Uploading file to cloud storage...",notifying:"Finalising upload with the backend...",success:"Upload complete. Awaiting admin approval.",error:"Upload failed. Please try again."},h={idle:"Idle",ready:"Ready",preparing:"Preparing",uploading:"Uploading",notifying:"Notifying",success:"Success",error:"Error"},g={idle:"secondary",ready:"secondary",preparing:"secondary",uploading:"secondary",notifying:"secondary",success:"default",error:"destructive"},b=function({teamId:e,documentType:r,label:s,disabled:b=!1,accept:v="application/pdf,image/*",onUploaded:y,disabledReason:j}){let{toast:w}=(0,m.useToast)(),[N,C]=(0,a.useState)(null),[k,S]=(0,a.useState)(0),[T,_]=(0,a.useState)("idle"),[D,R]=(0,a.useState)(!1),[U,I]=(0,a.useState)(null),[A,P]=(0,a.useState)(),[L,E]=(0,a.useState)(!1),B=b||!e,M=B&&!!e,H=(0,a.useMemo)(()=>B?e?j??"Uploads are locked for this document.":"Select a team to enable document uploads.":f[T],[j,B,T,e]),O=(0,a.useMemo)(()=>(0,p.cn)("sm:max-w-md cursor-pointer border-2 border-dashed border-[#f75700] bg-white/95 shadow-[0_0_0_1px_rgba(247,87,0,0.18)] transition focus-visible:border-[#f75700] focus-visible:ring-[#f75700]/50 file:cursor-pointer file:rounded-md file:border-0 file:bg-[#f75700] file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-white file:tracking-wide file:uppercase file:transition-colors hover:border-[#d94f00] file:hover:bg-[#d94f00]",N&&!B?"border-solid border-[#078e31] shadow-[0_0_0_1px_rgba(7,142,49,0.2)]":null,B||D?"cursor-not-allowed border-gray-300 bg-gray-100 shadow-none file:bg-gray-300 file:text-gray-600 hover:border-gray-300":null),[B,N,D]),F=M?"Approved":B&&!e?"Select Team":h[T],q=M?"default":B&&!e?"secondary":g[T],z=(0,p.cn)(M||"success"!==T?null:"bg-[#007367] text-white",M?"bg-emerald-100 text-emerald-700 border border-emerald-200":null),V=(0,a.useCallback)(()=>{C(null),S(e=>e+1)},[]),G=async()=>{if(B)return void w({variant:"destructive",title:"Select a team first",description:"Choose a team from the dashboard to upload documents."});if(!N)return void w({variant:"destructive",title:"No file selected",description:"Pick a file before starting the upload."});R(!0),_("preparing");try{let t=await (0,x.prepareUpload)(e,N,r);_("uploading"),await (0,x.uploadToGCS)(t.upload_url,N),_("notifying");let a=await (0,x.notifyUploaded)(t.version_id);_("success"),I(t.version_id),P(t.storage_path),w({title:`${s} uploaded`,description:"Upload successful. The document is pending administrator review."}),y?.({versionId:t.version_id,storagePath:t.storage_path,notifyPayload:a,preparePayload:t}),V()}catch(t){console.error("Document upload failed",t);let e=t instanceof Error?t.message:"The upload failed.";_("error"),w({variant:"destructive",title:"Upload failed",description:e})}finally{R(!1)}},$=async()=>{if(U){E(!0);try{let{download_url:e}=await (0,x.getDownloadURL)(U);window.open(e,"_blank","noopener,noreferrer")}catch(e){console.error("Download link error",e),w({variant:"destructive",title:"Download failed",description:e instanceof Error?e.message:"Unable to fetch download URL."})}finally{E(!1)}}};return(0,t.jsx)("div",{className:"rounded-lg border border-dashed border-[#002449]/20 bg-[#002449]/5 p-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[#002449]",children:[(0,t.jsx)(i,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:s})]}),(0,t.jsx)(u.Badge,{variant:q,className:z,children:F})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:[(0,t.jsx)(c.Input,{type:"file",accept:v,disabled:B||D,onChange:e=>{let t=e.target.files?.[0];C(t??null),_(t?"ready":"idle")},className:O},k),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsxs)(d.Button,{size:"sm",onClick:G,disabled:B||!N||D,"aria-disabled":B||!N||D,children:[D?(0,t.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(i,{className:"mr-2 h-4 w-4"}),D?"Uploading...":"Upload"]}),N&&!D&&(0,t.jsxs)(d.Button,{size:"sm",variant:"ghost",onClick:()=>{V(),_("idle")},disabled:B,children:[(0,t.jsx)(n.X,{className:"mr-1 h-4 w-4"}),"Clear"]}),U&&(0,t.jsxs)(d.Button,{size:"sm",variant:"outline",onClick:$,disabled:L,"aria-disabled":L,children:[L?(0,t.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(o.Download,{className:"mr-2 h-4 w-4"}),"Download"]})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:H}),U&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-muted-foreground",children:[(0,t.jsx)("span",{className:"font-semibold text-[#002449]",children:"Latest version:"}),(0,t.jsx)(u.Badge,{variant:"outline",className:"font-mono",children:U}),A&&(0,t.jsxs)("span",{className:"truncate",children:["Path: ",A]})]})]})})};var v=e.i(6194),y=e.i(70065),j=e.i(21463),w=e.i(14503),N=e.i(69136),C=e.i(78896),k=e.i(45081),S=e.i(95264),T=e.i(32229),_=e.i(93142),D=e.i(19960),R="Collapsible",[U,I]=(0,j.createContextScope)(R),[A,P]=U(R),L=a.forwardRef((e,r)=>{let{__scopeCollapsible:s,open:l,defaultOpen:i,disabled:n,onOpenChange:o,...d}=e,[c=!1,u]=(0,k.useControllableState)({prop:l,defaultProp:i,onChange:o});return(0,t.jsx)(A,{scope:s,disabled:n,contentId:(0,D.useId)(),open:c,onOpenToggle:a.useCallback(()=>u(e=>!e),[u]),children:(0,t.jsx)(S.Primitive.div,{"data-state":F(c),"data-disabled":n?"":void 0,...d,ref:r})})});L.displayName=R;var E="CollapsibleTrigger",B=a.forwardRef((e,a)=>{let{__scopeCollapsible:r,...s}=e,l=P(E,r);return(0,t.jsx)(S.Primitive.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":F(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...s,ref:a,onClick:(0,C.composeEventHandlers)(e.onClick,l.onOpenToggle)})});B.displayName=E;var M="CollapsibleContent",H=a.forwardRef((e,a)=>{let{forceMount:r,...s}=e,l=P(M,e.__scopeCollapsible);return(0,t.jsx)(_.Presence,{present:r||l.open,children:({present:e})=>(0,t.jsx)(O,{...s,ref:a,present:e})})});H.displayName=M;var O=a.forwardRef((e,r)=>{let{__scopeCollapsible:s,present:l,children:i,...n}=e,o=P(M,s),[d,c]=a.useState(l),u=a.useRef(null),m=(0,N.useComposedRefs)(r,u),p=a.useRef(0),x=p.current,f=a.useRef(0),h=f.current,g=o.open||d,b=a.useRef(g),v=a.useRef(void 0);return a.useEffect(()=>{let e=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,T.useLayoutEffect)(()=>{let e=u.current;if(e){v.current=v.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();p.current=t.height,f.current=t.width,b.current||(e.style.transitionDuration=v.current.transitionDuration,e.style.animationName=v.current.animationName),c(l)}},[o.open,l]),(0,t.jsx)(S.Primitive.div,{"data-state":F(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...n,ref:m,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":h?`${h}px`:void 0,...e.style},children:g&&i})});function F(e){return e?"open":"closed"}var q=e.i(37777),z="Accordion",V=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[G,$,K]=(0,w.createCollection)(z),[X,Y]=(0,j.createContextScope)(z,[K,I]),J=I(),Q=a.default.forwardRef((e,a)=>{let{type:r,...s}=e;return(0,t.jsx)(G.Provider,{scope:e.__scopeAccordion,children:"multiple"===r?(0,t.jsx)(er,{...s,ref:a}):(0,t.jsx)(ea,{...s,ref:a})})});Q.displayName=z;var[W,Z]=X(z),[ee,et]=X(z,{collapsible:!1}),ea=a.default.forwardRef((e,r)=>{let{value:s,defaultValue:l,onValueChange:i=()=>{},collapsible:n=!1,...o}=e,[d,c]=(0,k.useControllableState)({prop:s,defaultProp:l,onChange:i});return(0,t.jsx)(W,{scope:e.__scopeAccordion,value:d?[d]:[],onItemOpen:c,onItemClose:a.default.useCallback(()=>n&&c(""),[n,c]),children:(0,t.jsx)(ee,{scope:e.__scopeAccordion,collapsible:n,children:(0,t.jsx)(ei,{...o,ref:r})})})}),er=a.default.forwardRef((e,r)=>{let{value:s,defaultValue:l,onValueChange:i=()=>{},...n}=e,[o=[],d]=(0,k.useControllableState)({prop:s,defaultProp:l,onChange:i}),c=a.default.useCallback(e=>d((t=[])=>[...t,e]),[d]),u=a.default.useCallback(e=>d((t=[])=>t.filter(t=>t!==e)),[d]);return(0,t.jsx)(W,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:(0,t.jsx)(ee,{scope:e.__scopeAccordion,collapsible:!0,children:(0,t.jsx)(ei,{...n,ref:r})})})}),[es,el]=X(z),ei=a.default.forwardRef((e,r)=>{let{__scopeAccordion:s,disabled:l,dir:i,orientation:n="vertical",...o}=e,d=a.default.useRef(null),c=(0,N.useComposedRefs)(d,r),u=$(s),m="ltr"===(0,q.useDirection)(i),p=(0,C.composeEventHandlers)(e.onKeyDown,e=>{if(!V.includes(e.key))return;let t=e.target,a=u().filter(e=>!e.ref.current?.disabled),r=a.findIndex(e=>e.ref.current===t),s=a.length;if(-1===r)return;e.preventDefault();let l=r,i=s-1,o=()=>{(l=r+1)>i&&(l=0)},d=()=>{(l=r-1)<0&&(l=i)};switch(e.key){case"Home":l=0;break;case"End":l=i;break;case"ArrowRight":"horizontal"===n&&(m?o():d());break;case"ArrowDown":"vertical"===n&&o();break;case"ArrowLeft":"horizontal"===n&&(m?d():o());break;case"ArrowUp":"vertical"===n&&d()}let c=l%s;a[c].ref.current?.focus()});return(0,t.jsx)(es,{scope:s,disabled:l,direction:i,orientation:n,children:(0,t.jsx)(G.Slot,{scope:s,children:(0,t.jsx)(S.Primitive.div,{...o,"data-orientation":n,ref:c,onKeyDown:l?void 0:p})})})}),en="AccordionItem",[eo,ed]=X(en),ec=a.default.forwardRef((e,a)=>{let{__scopeAccordion:r,value:s,...l}=e,i=el(en,r),n=Z(en,r),o=J(r),d=(0,D.useId)(),c=s&&n.value.includes(s)||!1,u=i.disabled||e.disabled;return(0,t.jsx)(eo,{scope:r,open:c,disabled:u,triggerId:d,children:(0,t.jsx)(L,{"data-orientation":i.orientation,"data-state":eg(c),...o,...l,ref:a,disabled:u,open:c,onOpenChange:e=>{e?n.onItemOpen(s):n.onItemClose(s)}})})});ec.displayName=en;var eu="AccordionHeader",em=a.default.forwardRef((e,a)=>{let{__scopeAccordion:r,...s}=e,l=el(z,r),i=ed(eu,r);return(0,t.jsx)(S.Primitive.h3,{"data-orientation":l.orientation,"data-state":eg(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:a})});em.displayName=eu;var ep="AccordionTrigger",ex=a.default.forwardRef((e,a)=>{let{__scopeAccordion:r,...s}=e,l=el(z,r),i=ed(ep,r),n=et(ep,r),o=J(r);return(0,t.jsx)(G.ItemSlot,{scope:r,children:(0,t.jsx)(B,{"aria-disabled":i.open&&!n.collapsible||void 0,"data-orientation":l.orientation,id:i.triggerId,...o,...s,ref:a})})});ex.displayName=ep;var ef="AccordionContent",eh=a.default.forwardRef((e,a)=>{let{__scopeAccordion:r,...s}=e,l=el(z,r),i=ed(ef,r),n=J(r);return(0,t.jsx)(H,{role:"region","aria-labelledby":i.triggerId,"data-orientation":l.orientation,...n,...s,ref:a,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function eg(e){return e?"open":"closed"}eh.displayName=ef;var eb=e.i(43028);function ev({...e}){return(0,t.jsx)(Q,{"data-slot":"accordion",...e})}function ey({className:e,...a}){return(0,t.jsx)(ec,{"data-slot":"accordion-item",className:(0,p.cn)("border-b last:border-b-0",e),...a})}function ej({className:e,children:a,...r}){return(0,t.jsx)(em,{className:"flex",children:(0,t.jsxs)(ex,{"data-slot":"accordion-trigger",className:(0,p.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e),...r,children:[a,(0,t.jsx)(eb.ChevronDownIcon,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function ew({className:e,children:a,...r}){return(0,t.jsx)(eh,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...r,children:(0,t.jsx)("div",{className:(0,p.cn)("pt-0 pb-4",e),children:a})})}var eN=e.i(47627),eC=e.i(62870),ek=e.i(14077),eS=e.i(29108),eT=e.i(2870),e_=e.i(35301),eD=e.i(15664);function eR(e){return e?e.replace(/_/g," ").split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1):e).join(" "):"Unknown"}function eU(e){if(!e)return"outline";let t=e.toLowerCase();return["approved","verified","accepted"].includes(t)?"default":["rejected","declined","invalid"].includes(t)?"destructive":["pending","submitted","in_review","processing","awaiting_review"].includes(t)?"secondary":"outline"}function eI(){let e=(0,s.useRouter)(),i=(0,s.useSearchParams)(),n=i.get("teamId"),o=(0,a.useRef)((0,eS.getStoredPOCTeams)()),[c,p]=(0,a.useState)(o.current),[f,h]=(0,a.useState)(0===o.current.length),[g,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(n),[C,k]=(0,a.useState)(null),[S,T]=(0,a.useState)(!1),[_,D]=(0,a.useState)(null),[R,U]=(0,a.useState)([]),[I,A]=(0,a.useState)(!1),[P,L]=(0,a.useState)(null),[E,B]=(0,a.useState)(null),M=(0,a.useRef)(o.current.length>0),{toast:H}=(0,m.useToast)();(0,a.useEffect)(()=>{let e=!1;return(async()=>{M.current||h(!0),j(null);try{let t=await ek.authService.getPOCTeams();if(e)return;p(t),N(e=>e?t.some(t=>String(t.id)===e)?e:null:e),M.current=t.length>0}catch(t){if(e)return;j(t instanceof Error?t.message:"Unable to load assigned teams.")}finally{e||h(!1)}})(),()=>{e=!0}},[]);let O=(0,a.useMemo)(()=>new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}),[]);(0,a.useEffect)(()=>{n&&n!==w&&N(n)},[n,w]);let F=(0,a.useCallback)(t=>{if(t===w)return;N(t);let a=new URLSearchParams(i.toString());a.set("teamId",t),e.replace(`?${a.toString()}`,{scroll:!1})},[e,i,w]),q=w??C?.id??void 0,z=(0,a.useCallback)(async e=>{A(!0),L(null);try{let t=await (0,x.getTeamDocumentHistory)(e);U(t)}catch(e){console.error("Team document history error",e),L(e instanceof Error?e.message:"Unable to load document history.")}finally{A(!1)}},[]),V=(0,a.useCallback)(()=>{q&&z(q)},[q,z]),G=(0,a.useCallback)(async e=>{if(e){B(e);try{let{download_url:t}=await (0,x.getDownloadURL)(e);window.open(t,"_blank","noopener,noreferrer")}catch(e){console.error("Document download failed",e),H({variant:"destructive",title:"Download failed",description:e instanceof Error?e.message:"Unable to fetch download link."})}finally{B(null)}}},[H]);(0,a.useEffect)(()=>{let e=!0;if(!w){k(null),T(!1),D(null);return}return(async()=>{T(!0),D(null);try{let t=await ek.authService.getPOCTeamDetail(w);e&&k(t)}catch(t){e&&D(t?.message||"Unable to load team information")}finally{e&&T(!1)}})(),()=>{e=!1}},[w]),(0,a.useEffect)(()=>{q?z(q):U([])},[q,z]);let $=(0,a.useMemo)(()=>C?.members?[...C.members].sort((e,t)=>{let a=e=>{if(!e)return 5;let t=e.toLowerCase();return t.includes("leader")?0:t.includes("mentor")?1:t.includes("faculty")?2:3};return a(e.role)-a(t.role)}):[],[C]),K=C?.faculty_mentor,X=$.find(e=>e.role?.toLowerCase().includes("leader"));return(0,t.jsx)(v.DashboardShell,{children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",style:{color:"#002449"},children:"Document Submission"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload mandatory documentation for verification ahead of the Grand Finale."})]}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3 md:w-auto md:items-end",children:[(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[(0,t.jsx)("div",{className:"w-full min-w-[220px] sm:w-64",children:(0,t.jsxs)(eC.Select,{value:w??void 0,onValueChange:F,disabled:f||0===c.length,children:[(0,t.jsx)(eC.SelectTrigger,{className:"w-full border border-[#002449]/40 focus:border-[#002449] focus:ring-[#002449]/20",children:(0,t.jsx)(eC.SelectValue,{placeholder:f?"Loading teams...":"Select a team"})}),(0,t.jsx)(eC.SelectContent,{children:(0,t.jsx)(eC.SelectGroup,{children:c.map(e=>(0,t.jsx)(eC.SelectItem,{value:e.id,children:(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("span",{className:"font-medium text-sm text-gray-900",children:e.name})})},e.id))})})]})}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:w&&(0,t.jsx)(d.Button,{asChild:!0,variant:"secondary",size:"sm",children:(0,t.jsx)(r.default,{href:`/poc/teams/${w}`,children:"View Team Details"})})})]}),g&&(0,t.jsx)("p",{className:"text-xs font-medium text-destructive",children:g})]})]}),!w&&!f&&!g&&c.length>0&&(0,t.jsx)(y.Card,{className:"p-6 border-dashed border-[#f75700] bg-[#f75700]/5",children:(0,t.jsx)("p",{className:"text-sm text-gray-700",children:"Select a team using the dropdown above to manage document submissions. Once chosen, you can upload and review files for that team here."})}),_&&(0,t.jsx)(y.Card,{className:"border border-red-200 bg-red-50 p-4",children:(0,t.jsx)("p",{className:"text-sm text-red-800",children:_})}),S&&(0,t.jsxs)(y.Card,{className:"p-10 flex flex-col items-center justify-center gap-4",children:[(0,t.jsx)(l.Loader2,{className:"w-6 h-6 animate-spin text-[#f75700]"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading team information..."})]}),C&&!S&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(y.Card,{className:"p-6 border border-gray-200 shadow-sm",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",style:{color:"#002449"},children:C.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:C.institution}),C.problem_statement&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold bg-[#002449]/10 text-[#002449]",children:["Problem Statement ID: ",C.problem_statement.id]})]}),X&&(0,t.jsxs)("div",{className:"bg-[#f75700]/10 border border-[#f75700]/30 rounded-lg p-4 min-w-[220px]",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-[#f75700] font-semibold",children:"Team Leader"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:X.user?.name||X.user?.email}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground break-all",children:X.user?.email})]})]})}),P&&(0,t.jsx)(y.Card,{className:"border border-destructive/20 bg-destructive/5 p-4",children:(0,t.jsx)("p",{className:"text-xs text-destructive",children:P})}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eT.Users,{className:"w-5 h-5 text-[#002449]"}),(0,t.jsx)("h3",{className:"text-lg font-semibold",style:{color:"#002449"},children:"Mentor & Team Members"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[K&&(0,t.jsxs)(y.Card,{className:"p-4 border border-[#002449]/20 bg-[#002449]/5",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-[#002449] font-semibold",children:"Faculty Mentor"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:K.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Official contact shared during onboarding."})]}),$.map(e=>(0,t.jsxs)(y.Card,{className:"p-4 border border-gray-200",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-gray-500 font-semibold",children:e.role}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:e.user.name||e.user.email}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground break-all",children:e.user.email})]},e.user.email))]})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",style:{color:"#002449"},children:"Document Categories"}),(0,t.jsx)(ev,{type:"multiple",className:"space-y-3",children:eD.DOCUMENT_SECTIONS.map(({id:e,title:a,icon:r,description:s,requirements:i,documentType:n,accept:o})=>{let c=R.find(e=>e.document_type===n),m=c?.versions?[...c.versions].sort((e,t)=>(t.version??0)-(e.version??0)):[],p=c?.latest_version??m[0],x=c?.latest_status??p?.status,f=(0,eD.isApprovedStatus)(x),h=c?.requires_upload??(!p&&!c?.pending_review),g=c?.pending_review??!1,v=h&&!p?"Awaiting Upload":eR(x),y=h&&!p?"outline":eU(x),j=p?.uploaded_at?O.format(new Date(p.uploaded_at)):null,w=p?.rejection_reason;return(0,t.jsxs)(ey,{value:e,className:"border border-gray-200 rounded-lg",children:[(0,t.jsxs)(ej,{className:"px-4 py-3 text-left items-center",children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[(0,t.jsx)(r,{className:"w-5 h-5 text-[#f75700]"}),(0,t.jsx)("span",{className:"font-semibold text-sm md:text-base text-gray-900",children:a})]}),f&&(0,t.jsx)(e_.CheckCircle2,{className:"h-4 w-4 text-emerald-500","aria-label":"Document approved"})]}),(0,t.jsxs)(ew,{className:"px-4 pb-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:s}),(0,t.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-700",children:i.map(e=>(0,t.jsx)("li",{children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b,{teamId:q,documentType:n,label:a,accept:o,onUploaded:V,disabled:f,disabledReason:f?"This document is already approved. Uploading a new file is disabled.":void 0}),(0,t.jsxs)("div",{className:"space-y-2 text-xs",children:[I?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(l.Loader2,{className:"h-3 w-3 animate-spin"})," Updating status..."]}):(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(u.Badge,{variant:y,children:v}),g&&(0,t.jsx)(u.Badge,{variant:"secondary",children:"Pending Review"}),!f&&h&&(0,t.jsx)("span",{className:"text-muted-foreground",children:"Upload required"}),j&&(0,t.jsxs)("span",{className:"text-muted-foreground",children:["Last update: ",j]})]}),w&&!I&&(0,t.jsxs)("p",{className:"text-xs text-destructive",children:["Rejection note: ",w]}),!I&&0===m.length&&!h&&(0,t.jsx)("p",{className:"text-muted-foreground",children:"No previous uploads recorded."})]}),!I&&m.length>0&&(0,t.jsx)("div",{className:"rounded-lg border border-dashed border-[#002449]/15 bg-white/60",children:(0,t.jsxs)(eN.Table,{children:[(0,t.jsx)(eN.TableHeader,{children:(0,t.jsxs)(eN.TableRow,{children:[(0,t.jsx)(eN.TableHead,{className:"w-[70px]",children:"Version"}),(0,t.jsx)(eN.TableHead,{children:"Status"}),(0,t.jsx)(eN.TableHead,{children:"File"}),(0,t.jsx)(eN.TableHead,{children:"Uploaded"}),(0,t.jsx)(eN.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(eN.TableBody,{children:m.map(e=>{let a=e.uploaded_at?O.format(new Date(e.uploaded_at)):"—",r=eR(e.status),s=eU(e.status),i=E===e.id;return(0,t.jsxs)(eN.TableRow,{children:[(0,t.jsx)(eN.TableCell,{className:"font-mono text-xs",children:e.version??"—"}),(0,t.jsx)(eN.TableCell,{children:(0,t.jsx)(u.Badge,{variant:s,children:r})}),(0,t.jsx)(eN.TableCell,{className:"text-xs text-muted-foreground",children:e.original_filename||"—"}),(0,t.jsx)(eN.TableCell,{className:"text-xs text-muted-foreground",children:a}),(0,t.jsx)(eN.TableCell,{className:"text-right",children:(0,t.jsx)(d.Button,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>G(e.id),disabled:i,children:i?(0,t.jsx)(l.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):"View"})})]},e.id)})})]})})]})]})]},e)})})]})]})]})})}function eA(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(v.DashboardShell,{children:(0,t.jsxs)("div",{className:"flex h-full items-center justify-center py-20",children:[(0,t.jsx)(l.Loader2,{className:"mr-3 h-5 w-5 animate-spin text-[#f75700]"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading document submission…"})]})}),children:(0,t.jsx)(eI,{})})}e.s(["default",()=>eA],1239)}]);