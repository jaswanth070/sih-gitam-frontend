{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Jaswanth/Downloads/smart-india-hackathon-app/lib/auth-service.ts"],"sourcesContent":["/**\n * Auth Service API Client\n * Handles all authentication-related API calls with secure token management\n */\n\nconst ACCESS_TOKEN_KEY = \"sih_access_token\"\nconst REFRESH_TOKEN_KEY = \"sih_refresh_token\"\nconst BASE_URL = process.env.NEXT_PUBLIC_AUTH_SERVICE_URL || \"http://127.0.0.1:8000/api\"\n\nexport interface LoginRequest {\n  email: string\n  password: string\n}\n\nexport interface LoginResponse {\n  access: string\n  refresh: string\n}\n\nexport interface OTPRequest {\n  email: string\n  purpose: string\n}\n\nexport interface OTPVerifyRequest {\n  email: string\n  otp: string\n  new_password: string\n}\n\nexport interface RefreshTokenRequest {\n  refresh: string\n}\n\nexport interface RefreshTokenResponse {\n  access: string\n}\n\nexport interface LogoutRequest {\n  refresh: string\n}\n\nexport interface TeamDetails {\n  id: string\n  name: string\n  institution: string\n  poc: any\n  faculty_mentor: {\n    id: string\n    name: string\n  }\n  problem_statement: {\n    id: string\n    title: string\n  }\n  members: Array<{\n    id: string\n    role: string\n    user: {\n      id: string\n      email: string\n      name: string\n    }\n  }>\n}\n\nexport interface POCTeam {\n  id: string\n  name: string\n  institution: string\n  [key: string]: any\n}\n\nexport interface CurrentUser {\n  id?: string\n  email?: string\n  name?: string\n  team_ids?: string[]\n  role?: string\n  [key: string]: any\n}\n\nclass AuthService {\n  private accessTokenKey = ACCESS_TOKEN_KEY\n  private refreshTokenKey = REFRESH_TOKEN_KEY\n\n  private setTokens(access: string, refresh: string) {\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(this.accessTokenKey, access)\n      localStorage.setItem(this.refreshTokenKey, refresh)\n    }\n  }\n\n  getAccessToken(): string | null {\n    if (typeof window !== \"undefined\") {\n      return localStorage.getItem(this.accessTokenKey)\n    }\n    return null\n  }\n\n  getRefreshToken(): string | null {\n    if (typeof window !== \"undefined\") {\n      return localStorage.getItem(this.refreshTokenKey)\n    }\n    return null\n  }\n\n  clearTokens() {\n    if (typeof window !== \"undefined\") {\n      localStorage.removeItem(this.accessTokenKey)\n      localStorage.removeItem(this.refreshTokenKey)\n    }\n  }\n\n  private async request<T>(endpoint: string, options: RequestInit = {}, retryCount = 0): Promise<T> {\n    const url = `${BASE_URL}${endpoint}`\n    const headers = new Headers(options.headers || {})\n\n    const accessToken = this.getAccessToken()\n    if (accessToken) {\n      headers.set(\"Authorization\", `Bearer ${accessToken}`)\n    }\n\n    const response = await fetch(url, {\n      ...options,\n      headers,\n    })\n\n    if (response.status === 401 && retryCount === 0) {\n      const refreshToken = this.getRefreshToken()\n      if (refreshToken) {\n        try {\n          const newAccessToken = await this.refreshAccessToken(refreshToken)\n          return this.request<T>(endpoint, options, 1)\n        } catch (error) {\n          this.clearTokens()\n          if (typeof window !== \"undefined\") {\n            window.location.href = \"/login\"\n          }\n          throw new Error(\"Session expired. Please login again.\")\n        }\n      }\n    }\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({}))\n      throw new Error(error.detail || error.message || `API Error: ${response.status}`)\n    }\n\n    return response.json()\n  }\n\n  getCurrentUser(): CurrentUser | null {\n    if (typeof window === \"undefined\") return null\n    const token = this.getAccessToken()\n    if (!token) return null\n\n    try {\n      const [, payload] = token.split(\".\")\n      if (!payload) return null\n      const json = JSON.parse(this.base64UrlDecode(payload))\n      return json as CurrentUser\n    } catch (e) {\n      return null\n    }\n  }\n\n  private base64UrlDecode(input: string): string {\n    // Convert from base64url to base64\n    let base64 = input.replace(/-/g, \"+\").replace(/_/g, \"/\")\n    // Pad with '=' to make length a multiple of 4\n    const pad = base64.length % 4\n    if (pad) base64 += \"=\".repeat(4 - pad)\n    if (typeof window !== \"undefined\" && typeof window.atob === \"function\") {\n      return decodeURIComponent(\n        Array.prototype.map\n          .call(window.atob(base64), (c: string) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\n          .join(\"\")\n      )\n    }\n    // Fallback for non-browser environments\n    return Buffer.from(base64, \"base64\").toString(\"utf-8\")\n  }\n\n  async login(request: LoginRequest): Promise<LoginResponse> {\n    const response = await this.request<LoginResponse>(\"/token/\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(request),\n    })\n\n    this.setTokens(response.access, response.refresh)\n    return response\n  }\n\n  private async refreshAccessToken(refreshToken: string): Promise<string> {\n    const response = await this.request<RefreshTokenResponse>(\"/token/refresh/\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ refresh: refreshToken }),\n    })\n\n    const accessToken = response.access\n    localStorage.setItem(this.accessTokenKey, accessToken)\n    return accessToken\n  }\n\n  async requestOTP(email: string): Promise<{ detail: string }> {\n    return this.request(\"/auth/send-otp/\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ email, purpose: \"first_login\" }),\n    })\n  }\n\n  async verifyOTPAndSetPassword(request: OTPVerifyRequest): Promise<{ detail: string; next: string }> {\n    return this.request(\"/auth/verify-otp/\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(request),\n    })\n  }\n\n  async autoLogin(email: string, password: string): Promise<LoginResponse> {\n    return this.login({ email, password })\n  }\n\n  async getTeamDetails(preview = false): Promise<TeamDetails> {\n    const endpoint = preview ? \"/leader/team/?preview=1\" : \"/leader/team/\"\n    return this.request(endpoint)\n  }\n\n  async confirmTeamDetails(): Promise<{ detail: string; next: string }> {\n    return this.request(\"/leader/team/confirm/\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({}),\n    })\n  }\n\n  async getPOCTeams(): Promise<POCTeam[]> {\n    return this.request(\"/poc/teams/\")\n  }\n\n  async getPOCTeamDetail(teamId: string): Promise<TeamDetails> {\n    return this.request(`/poc/teams/${teamId}/`)\n  }\n\n  async logout(): Promise<{ detail: string }> {\n    const refreshToken = this.getRefreshToken()\n    if (!refreshToken) {\n      this.clearTokens()\n      return { detail: \"Logged out\" }\n    }\n\n    try {\n      const response = await this.request<{ detail: string }>(\"/auth/logout/\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ refresh: refreshToken }),\n      })\n      this.clearTokens()\n      return response\n    } catch (error) {\n      this.clearTokens()\n      return { detail: \"Logged out\" }\n    }\n  }\n\n  async logoutAll(): Promise<{ detail: string }> {\n    try {\n      const response = await this.request<{ detail: string }>(\"/auth/logout_all/\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n      })\n      this.clearTokens()\n      return response\n    } catch (error) {\n      this.clearTokens()\n      return { detail: \"Logged out from all devices\" }\n    }\n  }\n}\n\nexport const authService = new AuthService()\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///D:/Jaswanth/Downloads/smart-india-hackathon-app/lib/requests-service.ts"],"sourcesContent":["/**\r\n * Requests Service API Client\r\n * Handles all communication with the Requests microservice\r\n */\r\n\r\nimport { authService } from \"./auth-service\"\r\n\r\nconst BASE_URL = process.env.NEXT_PUBLIC_REQUESTS_SERVICE_URL || \"http://127.0.0.1:8001/api\"\r\nconst ACCESS_TOKEN_KEY = \"sih_access_token\"\r\n\r\nexport interface BOMItem {\r\n  id?: number\r\n  item_name: string\r\n  quantity: number\r\n}\r\n\r\nexport interface AdditionalItem {\r\n  id?: number\r\n  item_name: string\r\n  quantity: number\r\n}\r\n\r\nexport interface FabricationDetails {\r\n  fab_type: \"3D\" | \"LASER\" | \"OTHER\"\r\n  name: string\r\n  file?: string\r\n}\r\n\r\nexport interface RequestData {\r\n  id: number\r\n  team_id: string\r\n  submitted_by_id: string\r\n  category: \"BOM\" | \"ADDITIONAL\" | \"FABRICATION\"\r\n  status: \"Submitted\" | \"Processing\" | \"Issued\" | \"Cannot be Processed\"\r\n  notes: string\r\n  created_at: string\r\n  updated_at: string\r\n  position?: number\r\n  bom_items: BOMItem[]\r\n  additional_items: AdditionalItem[]\r\n  fabrication: FabricationDetails | null\r\n}\r\n\r\nexport interface ListRequestsParams {\r\n  category?: \"BOM\" | \"ADDITIONAL\" | \"FABRICATION\"\r\n  status?: \"Submitted\" | \"Processing\" | \"Issued\" | \"Cannot be Processed\"\r\n  fab_type?: \"3D\" | \"LASER\" | \"OTHER\"\r\n  team_id?: string\r\n  search?: string\r\n  ordering?: string\r\n  page?: number\r\n}\r\n\r\nexport interface RequestsListResponse {\r\n  count: number\r\n  next: string | null\r\n  previous: string | null\r\n  results: RequestData[]\r\n}\r\n\r\nasync function apiCall<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\r\n  const url = `${BASE_URL}${endpoint}`\r\n  const headers = new Headers(options.headers || {})\r\n\r\n  const accessToken = authService.getAccessToken()\r\n  if (accessToken && !headers.has(\"Authorization\")) {\r\n    headers.set(\"Authorization\", `Bearer ${accessToken}`)\r\n  }\r\n\r\n  let response = await fetch(url, {\r\n    ...options,\r\n    headers,\r\n  })\r\n\r\n  if (response.status === 401) {\r\n    const refreshToken = authService.getRefreshToken()\r\n    if (refreshToken) {\r\n      try {\r\n        const refreshResponse = await fetch(`${BASE_URL}/token/refresh/`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ refresh: refreshToken }),\r\n        })\r\n\r\n        if (refreshResponse.ok) {\r\n          const { access } = await refreshResponse.json()\r\n          localStorage.setItem(ACCESS_TOKEN_KEY, access)\r\n          headers.set(\"Authorization\", `Bearer ${access}`)\r\n          response = await fetch(url, { ...options, headers })\r\n        }\r\n      } catch (error) {\r\n        authService.clearTokens()\r\n        window.location.href = \"/login\"\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}))\r\n    throw new Error(error.detail || error.message || `API Error: ${response.status}`)\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\nexport const requestsService = {\r\n  // List requests with filters\r\n  async listRequests(params?: ListRequestsParams): Promise<RequestsListResponse> {\r\n    const queryParams = new URLSearchParams()\r\n    if (params?.category) queryParams.append(\"category\", params.category)\r\n    if (params?.status) queryParams.append(\"status\", params.status)\r\n    if (params?.fab_type) queryParams.append(\"fab_type\", params.fab_type)\r\n    if (params?.team_id) queryParams.append(\"team_id\", params.team_id)\r\n    if (params?.search) queryParams.append(\"search\", params.search)\r\n    if (params?.ordering) queryParams.append(\"ordering\", params.ordering)\r\n    if (params?.page) queryParams.append(\"page\", params.page.toString())\r\n\r\n    const endpoint = `/requests/?${queryParams.toString()}`\r\n    return apiCall<RequestsListResponse>(endpoint)\r\n  },\r\n\r\n  // Get queue snapshot\r\n  async getQueueSnapshot(includePositions = true): Promise<RequestsListResponse> {\r\n    const endpoint = `/requests/queue/?include_positions=${includePositions}`\r\n    return apiCall<RequestsListResponse>(endpoint)\r\n  },\r\n\r\n  // Get single request\r\n  async getRequest(id: number): Promise<RequestData> {\r\n    return apiCall<RequestData>(`/requests/${id}/`)\r\n  },\r\n\r\n  // Create BOM request\r\n  async createBOMRequest(teamId: string, notes: string, items: BOMItem[]): Promise<RequestData> {\r\n    return apiCall<RequestData>(\"/requests/\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        team_id: teamId,\r\n        category: \"BOM\",\r\n        notes,\r\n        bom_items: items,\r\n      }),\r\n    })\r\n  },\r\n\r\n  // Create Additional request\r\n  async createAdditionalRequest(teamId: string, notes: string, items: AdditionalItem[]): Promise<RequestData> {\r\n    return apiCall<RequestData>(\"/requests/\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        team_id: teamId,\r\n        category: \"ADDITIONAL\",\r\n        notes,\r\n        additional_items: items,\r\n      }),\r\n    })\r\n  },\r\n\r\n  // Create Fabrication request with file\r\n  async createFabricationRequest(\r\n    teamId: string,\r\n    notes: string,\r\n    fabDetails: FabricationDetails,\r\n    file?: File,\r\n  ): Promise<RequestData> {\r\n    const formData = new FormData()\r\n    formData.append(\"team_id\", teamId)\r\n    formData.append(\"category\", \"FABRICATION\")\r\n    formData.append(\"notes\", notes)\r\n    formData.append(\"fabrication\", JSON.stringify(fabDetails))\r\n    if (file) {\r\n      formData.append(\"file\", file)\r\n    }\r\n\r\n    const accessToken = authService.getAccessToken()\r\n    const headers = new Headers()\r\n    if (accessToken) {\r\n      headers.set(\"Authorization\", `Bearer ${accessToken}`)\r\n    }\r\n\r\n    const response = await fetch(`${BASE_URL}/requests/`, {\r\n      method: \"POST\",\r\n      headers,\r\n      body: formData,\r\n    })\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json().catch(() => ({}))\r\n      throw new Error(error.detail || error.message || `API Error: ${response.status}`)\r\n    }\r\n\r\n    return response.json()\r\n  },\r\n\r\n  // Change request status\r\n  async changeRequestStatus(id: number, toStatus: string, note?: string): Promise<RequestData> {\r\n    return apiCall<RequestData>(`/requests/${id}/change_status/`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        to_status: toStatus,\r\n        note: note || \"\",\r\n      }),\r\n    })\r\n  },\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"sources":["file:///D:/Jaswanth/Downloads/smart-india-hackathon-app/app/requests/new/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport Link from \"next/link\"\r\nimport { authService } from \"@/lib/auth-service\"\r\nimport { requestsService, type BOMItem, type AdditionalItem, type FabricationDetails } from \"@/lib/requests-service\"\r\nimport Image from \"next/image\"\r\n\r\ntype RequestType = \"BOM\" | \"ADDITIONAL\" | \"FABRICATION\" | null\r\n\r\nexport default function NewRequestPage() {\r\n  const router = useRouter()\r\n  const [requestType, setRequestType] = useState<RequestType>(null)\r\n  const [userTeams, setUserTeams] = useState<string[]>([])\r\n  const [selectedTeam, setSelectedTeam] = useState(\"\")\r\n  const [notes, setNotes] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(\"\")\r\n\r\n  // BOM/Additional state\r\n  const [items, setItems] = useState<(BOMItem | AdditionalItem)[]>([])\r\n  const [newItemName, setNewItemName] = useState(\"\")\r\n  const [newItemQuantity, setNewItemQuantity] = useState(\"1\")\r\n\r\n  // Fabrication state\r\n  const [fabType, setFabType] = useState<\"3D\" | \"LASER\" | \"OTHER\">(\"3D\")\r\n  const [fabName, setFabName] = useState(\"\")\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\r\n\r\n  const user = authService.getCurrentUser()\r\n\r\n  useEffect(() => {\r\n    const token = authService.getAccessToken()\r\n    if (!token) {\r\n      router.push(\"/login\")\r\n      return\r\n    }\r\n\r\n    if (user?.team_ids) {\r\n      setUserTeams(user.team_ids)\r\n      if (user.team_ids.length > 0) {\r\n        setSelectedTeam(user.team_ids[0])\r\n      }\r\n    }\r\n  }, [user, router])\r\n\r\n  const addItem = () => {\r\n    if (!newItemName.trim()) return\r\n    setItems([...items, { item_name: newItemName, quantity: Number.parseInt(newItemQuantity) || 1 }])\r\n    setNewItemName(\"\")\r\n    setNewItemQuantity(\"1\")\r\n  }\r\n\r\n  const removeItem = (index: number) => {\r\n    setItems(items.filter((_, i) => i !== index))\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setLoading(true)\r\n      setError(\"\")\r\n\r\n      if (!selectedTeam) {\r\n        setError(\"Please select a team\")\r\n        return\r\n      }\r\n\r\n      if (!notes.trim()) {\r\n        setError(\"Please enter a description\")\r\n        return\r\n      }\r\n\r\n      let result\r\n\r\n      if (requestType === \"BOM\") {\r\n        if (items.length === 0) {\r\n          setError(\"Please add at least one item\")\r\n          return\r\n        }\r\n        result = await requestsService.createBOMRequest(selectedTeam, notes, items as BOMItem[])\r\n      } else if (requestType === \"ADDITIONAL\") {\r\n        if (items.length === 0) {\r\n          setError(\"Please add at least one item\")\r\n          return\r\n        }\r\n        result = await requestsService.createAdditionalRequest(selectedTeam, notes, items as AdditionalItem[])\r\n      } else if (requestType === \"FABRICATION\") {\r\n        if (!fabName.trim()) {\r\n          setError(\"Please enter fabrication name\")\r\n          return\r\n        }\r\n        if (fabType === \"3D\" && !selectedFile) {\r\n          setError(\"Please upload a file for 3D fabrication\")\r\n          return\r\n        }\r\n\r\n        const fabDetails: FabricationDetails = {\r\n          fab_type: fabType,\r\n          name: fabName,\r\n        }\r\n\r\n        result = await requestsService.createFabricationRequest(\r\n          selectedTeam,\r\n          notes,\r\n          fabDetails,\r\n          selectedFile || undefined,\r\n        )\r\n      }\r\n\r\n      if (result) {\r\n        router.push(`/requests/${result.id}`)\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[v0] Error submitting request:\", err)\r\n      setError(err instanceof Error ? err.message : \"Failed to submit request\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white\">\r\n      {/* Header */}\r\n      <header className=\"bg-white border-b border-gray-200\">\r\n        <div className=\"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Image\r\n              src=\"/images/image.png\"\r\n              alt=\"Smart India Hackathon\"\r\n              width={120}\r\n              height={40}\r\n              className=\"h-10 w-auto\"\r\n            />\r\n            <Image src=\"/images/gitam-logo-20-282-29.png\" alt=\"GITAM\" width={60} height={40} className=\"h-10 w-auto\" />\r\n          </div>\r\n          <Link href=\"/requests\" className=\"text-gray-600 hover:text-gray-900\">\r\n            ‚Üê Back\r\n          </Link>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"max-w-4xl mx-auto px-4 py-8\">\r\n        <h1 className=\"text-3xl font-bold mb-2\" style={{ color: \"#002449\" }}>\r\n          New Request\r\n        </h1>\r\n        <p className=\"text-gray-600 mb-8\">Create a BOM, Additional Materials, or Fabrication request for your team</p>\r\n\r\n        {!requestType ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            {[\"BOM\", \"ADDITIONAL\", \"FABRICATION\"].map((type) => (\r\n              <button\r\n                key={type}\r\n                onClick={() => setRequestType(type as RequestType)}\r\n                className=\"p-6 border-2 rounded-lg transition-all hover:shadow-lg\"\r\n                style={{ borderColor: type === \"BOM\" ? \"#002449\" : type === \"ADDITIONAL\" ? \"#007367\" : \"#f75700\" }}\r\n              >\r\n                <h3\r\n                  className=\"text-lg font-bold mb-2\"\r\n                  style={{ color: type === \"BOM\" ? \"#002449\" : type === \"ADDITIONAL\" ? \"#007367\" : \"#f75700\" }}\r\n                >\r\n                  {type === \"FABRICATION\" ? \"3D/Laser Fabrication\" : type}\r\n                </h3>\r\n                <p className=\"text-gray-600 text-sm\">\r\n                  {type === \"BOM\" && \"Request Bill of Materials components\"}\r\n                  {type === \"ADDITIONAL\" && \"Request additional materials or supplies\"}\r\n                  {type === \"FABRICATION\" && \"Submit fabrication files for 3D printing or laser cutting\"}\r\n                </p>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-white border border-gray-200 rounded-lg p-8\">\r\n            {error && (\r\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\r\n                <p className=\"text-red-800\">{error}</p>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"mb-6\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Team</label>\r\n              <select\r\n                value={selectedTeam}\r\n                onChange={(e) => setSelectedTeam(e.target.value)}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2\"\r\n                style={{ focusColor: \"#002449\" }}\r\n              >\r\n                {userTeams.map((teamId) => (\r\n                  <option key={teamId} value={teamId}>\r\n                    {teamId}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"mb-6\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description / Notes</label>\r\n              <textarea\r\n                value={notes}\r\n                onChange={(e) => setNotes(e.target.value)}\r\n                placeholder=\"Describe what you need...\"\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 resize-none\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n\r\n            {(requestType === \"BOM\" || requestType === \"ADDITIONAL\") && (\r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-4\">Items</label>\r\n                <div className=\"space-y-3\">\r\n                  {items.map((item, index) => (\r\n                    <div key={index} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg\">\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"font-medium text-gray-900\">{item.item_name}</p>\r\n                        <p className=\"text-sm text-gray-600\">Qty: {item.quantity}</p>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => removeItem(index)}\r\n                        className=\"px-3 py-1 text-sm font-medium text-white rounded-lg\"\r\n                        style={{ backgroundColor: \"#f75700\" }}\r\n                      >\r\n                        Remove\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Item name\"\r\n                    value={newItemName}\r\n                    onChange={(e) => setNewItemName(e.target.value)}\r\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2\"\r\n                  />\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"Quantity\"\r\n                    value={newItemQuantity}\r\n                    onChange={(e) => setNewItemQuantity(e.target.value)}\r\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2\"\r\n                    min=\"1\"\r\n                  />\r\n                  <button\r\n                    onClick={addItem}\r\n                    className=\"px-4 py-2 text-white font-medium rounded-lg\"\r\n                    style={{ backgroundColor: \"#078e31\" }}\r\n                  >\r\n                    Add Item\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {requestType === \"FABRICATION\" && (\r\n              <>\r\n                <div className=\"mb-6\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Fabrication Type</label>\r\n                  <select\r\n                    value={fabType}\r\n                    onChange={(e) => setFabType(e.target.value as any)}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2\"\r\n                  >\r\n                    <option value=\"3D\">3D Printing</option>\r\n                    <option value=\"LASER\">Laser Cutting</option>\r\n                    <option value=\"OTHER\">Other</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"mb-6\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Name</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"e.g., Chassis, Gear A\"\r\n                    value={fabName}\r\n                    onChange={(e) => setFabName(e.target.value)}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2\"\r\n                  />\r\n                </div>\r\n\r\n                {fabType === \"3D\" && (\r\n                  <div className=\"mb-6\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Upload File (STL/OBJ)</label>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\".stl,.obj\"\r\n                      onChange={(e) => setSelectedFile(e.target.files?.[0] || null)}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2\"\r\n                    />\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setRequestType(null)}\r\n                className=\"px-6 py-2 text-gray-700 font-medium rounded-lg border border-gray-300 hover:bg-gray-50\"\r\n              >\r\n                Change Type\r\n              </button>\r\n              <button\r\n                onClick={handleSubmit}\r\n                disabled={loading}\r\n                className=\"px-6 py-2 text-white font-medium rounded-lg transition-opacity\"\r\n                style={{ backgroundColor: \"#f75700\" }}\r\n                onMouseEnter={(e) => !loading && (e.currentTarget.style.opacity = \"0.9\")}\r\n                onMouseLeave={(e) => !loading && (e.currentTarget.style.opacity = \"1\")}\r\n              >\r\n                {loading ? \"Submitting...\" : \"Submit Request\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}